require("source-map-support").install(),function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/public/",n(n.s=55)}([function(e,t){e.exports=require("babel-runtime/helpers/classCallCheck")},function(e,t){e.exports=require("babel-runtime/helpers/createClass")},function(e,t){e.exports=require("react")},function(e,t){e.exports=require("babel-runtime/core-js/object/get-prototype-of")},function(e,t){e.exports=require("babel-runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("babel-runtime/helpers/inherits")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("babel-runtime/regenerator")},function(e,t){e.exports=require("babel-runtime/helpers/asyncToGenerator")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(24)),r=f(n(7)),s=f(n(8)),l=f(n(0)),u=f(n(1)),o=f(n(38)),i=f(n(36)),c=f(n(81)),d=f(n(22));f(n(16));function f(e){return e&&e.__esModule?e:{default:e}}var p=void 0,h=!1;function m(e){return new o.default(function(t){return setTimeout(t,e)})}var v=function(){function e(){(0,l.default)(this,e)}return(0,u.default)(e,null,[{key:"login",value:function(){var t=(0,s.default)(r.default.mark(function t(n,a){var s,l;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s={username:n,desktopCode:a},t.next=3,e.postRequest(s);case 3:return l=t.sent,t.abrupt("return",l.success);case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"fetchHome",value:function(){var t=(0,s.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"GetPollListHome"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"fetchPoll",value:function(){var t=(0,s.default)(r.default.mark(function t(n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"GetPoll",pollId:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"voteOnPoll",value:function(){var t=(0,s.default)(r.default.mark(function t(n,a,s){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"VoteOnPoll",pollId:n,voteAnswer:a,showOnFeed:s});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"GetDesktopCode",value:function(){var e=(0,s.default)(r.default.mark(function e(t,n){var a,s;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={function:"GetDesktopCode",phoneNumber:t,code:n},e.next=3,d.default.request(a);case 3:if((s=e.sent).success){e.next=6;break}throw new Error("Invalid Auth");case 6:return e.abrupt("return",s);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"CheckUsername",value:function(){var e=(0,s.default)(r.default.mark(function e(t){var n,a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={function:"CheckUsername",username:t},e.next=3,d.default.request(n);case 3:if((a=e.sent).success){e.next=6;break}throw new Error("Invalid Auth");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"GetCountry",value:function(){var e=(0,s.default)(r.default.mark(function e(){var t,n;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={function:"GetCountryCode"},e.next=3,d.default.request(t);case 3:if((n=e.sent).success){e.next=6;break}throw new Error("Invalid Auth");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"UserSignup",value:function(){var e=(0,s.default)(r.default.mark(function e(t){var n,a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={function:"UserSignup2",phoneNumber:t},e.next=3,d.default.request(n);case 3:if((a=e.sent).success){e.next=6;break}throw new Error("Invalid Auth");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"SendStat",value:function(){var e=(0,s.default)(r.default.mark(function e(t){var n,a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={function:"CheckIn",userName:t,event:"APP_START",data:"WEB"},e.next=3,d.default.request2(n);case 3:if((a=e.sent).success){e.next=6;break}throw new Error("Invalid Auth");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"UserSignup2",value:function(){var e=(0,s.default)(r.default.mark(function e(t,n){var a,s;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={function:"UserVerification",phoneNumber:t,code:n},e.next=3,d.default.request(a);case 3:if((s=e.sent).success){e.next=6;break}throw new Error("Invalid Auth");case 6:return e.abrupt("return",s);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"UserSignup3",value:function(){var e=(0,s.default)(r.default.mark(function e(t,n,a,s,l){var u,o;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u={function:"UserFinishSignup",phoneNumber:t,code:n,birth_year:a,sex:s,isIos:"false",user_name:l},e.next=4,d.default.request(u);case 4:if((o=e.sent).success){e.next=7;break}throw new Error("Invalid Auth");case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)}));return function(t,n,a,r,s){return e.apply(this,arguments)}}()},{key:"getPolls",value:function(){var t=(0,s.default)(r.default.mark(function t(n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest((0,a.default)({function:"GetPollList"},n));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"doSearch",value:function(){var t=(0,s.default)(r.default.mark(function t(n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"SearchPolls",searchString:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"fetchSocialFeed",value:function(){var t=(0,s.default)(r.default.mark(function t(n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest((0,a.default)({function:"SocialFeed"},n));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getUserSettings",value:function(){var t=(0,s.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"GetUserSettings"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"fetchFriendRequests",value:function(){var t=(0,s.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"GetFriendRequests"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"fetchFriends",value:function(){var t=(0,s.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"GetFriends"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"muteFriend",value:function(){var t=(0,s.default)(r.default.mark(function t(n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"MuteFriend",friendId:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"unmuteFriend",value:function(){var t=(0,s.default)(r.default.mark(function t(n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"UnmuteFriend",friendId:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"ignoreFriendRequest",value:function(){var t=(0,s.default)(r.default.mark(function t(n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"IgnoreFriendRequest",friendId:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"searchUsername",value:function(){var t=(0,s.default)(r.default.mark(function t(n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"SearchUsername",searchString:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"sendFriendRequest",value:function(){var t=(0,s.default)(r.default.mark(function t(n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"SendFriendRequest",friendId:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"approveFriendRequest",value:function(){var t=(0,s.default)(r.default.mark(function t(n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"ApproveFriendRequest",friendId:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"saveWalletAddress",value:function(){var t=(0,s.default)(r.default.mark(function t(n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"SaveWalletAddress",wallet:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getWalletAddress",value:function(){var t=(0,s.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"GetWalletAddress"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"deleteAccount",value:function(){var t=(0,s.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wsRequest({function:"DeleteAccount"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"postRequest",value:function(){var e=(0,s.default)(r.default.mark(function e(t){var n,a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,a=t,e.prev=2,e.next=5,i.default.post("/api/auth",a);case 5:n=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),new Error("A network error occured");case 11:return e.abrupt("return",n.data);case 12:case"end":return e.stop()}},e,this,[[2,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"ensureConnected",value:function(){var e=(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=5;break}return p=new c.default,e.next=4,p.connect();case 4:h=!0;case 5:if(h){e.next=10;break}return e.next=8,m(100);case 8:e.next=5;break;case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"wsRequest",value:function(){var t=(0,s.default)(r.default.mark(function t(n){var a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ensureConnected();case 2:return t.next=4,p.request(n);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(3)),r=c(n(0)),s=c(n(1)),l=c(n(4)),u=c(n(5)),o=n(2),i=c(o);function c(e){return e&&e.__esModule?e:{default:e}}n(182);var d=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.props=e,n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return i.default.createElement("div",{className:this.loadingClassName},i.default.createElement("div",{className:"lds-ripple"},i.default.createElement("div",null),i.default.createElement("div",null)))}},{key:"loadingClassName",get:function(){return this.props.fullScreen?this.props.enabled?"loadingOverlayFullScreen":"loadingOverlayFullScreen loadingOverlayDisabled":this.props.enabled?"loadingOverlay":"loadingOverlay loadingOverlayDisabled"}}]),t}(o.Component);d.defaultProps={fullScreen:!0},t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=u(n(13)),r=u(n(0)),s=u(n(1)),l=(u(n(9)),u(n(37)));function u(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t){(0,r.default)(this,e),(0,a.default)(this,t)}return(0,s.default)(e,[{key:"timeRemaining",get:function(){var e=(0,l.default)(),t=(0,l.default)(1e3*this.pollTime),n=l.default.duration(t.diff(e));return n.get("days")>0?n.get("days")+"D "+n.get("hours")+"H":n.get("hours")+":"+(n.get("minutes")<10?"0"+n.get("minutes"):n.get("minutes"))}},{key:"hasExpired",get:function(){var e=(0,l.default)();return(0,l.default)(1e3*this.pollTime)<=e}},{key:"votes",get:function(){return function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}(this.pollVotes)}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(3)),r=f(n(0)),s=f(n(1)),l=f(n(4)),u=f(n(5)),o=n(2),i=f(o),c=f(n(18)),d=n(6);function f(e){return e&&e.__esModule?e:{default:e}}n(194);var p=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.state={searchText:e.searchText||""},n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"doSearch",value:function(e){e&&"Enter"!==e.key||this.state.searchText.trim().length>0&&this.props.history.push("/search?q="+this.state.searchText.trim())}},{key:"openBrowsePolls",value:function(){this.props.history.push("/browse")}},{key:"openStarPolls",value:function(){this.props.history.push("/starPolls")}},{key:"openCreateWidget",value:function(){this.props.history.push("/createWidget")}},{key:"openSocial",value:function(){this.props.history.push("/social")}},{key:"render",value:function(){var e=this;return i.default.createElement("div",{className:"homeHeader"},i.default.createElement("div",{className:"homeLeft"},i.default.createElement("span",{className:"searchHeader"},"What do you care about?"),i.default.createElement("div",{className:"searchInputContainer"},i.default.createElement("input",{type:"text",className:"searchInput",placeholder:"Search by poll # or keyword",value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})},onKeyPress:function(t){return e.doSearch(t)}}),i.default.createElement("span",{className:"searchButton",onClick:function(){return e.doSearch()}},i.default.createElement("img",{className:"searchIcon",src:n(51)})))),i.default.createElement("div",{className:"homeRight"},i.default.createElement("div",{className:"headerFeatureButton headerBrowsePolls",onClick:function(){return e.openBrowsePolls()}},i.default.createElement("img",{className:"pollIcon",src:n(113)}),i.default.createElement("span",{className:"headerFeatureButtonText"},"Browse Polls")),i.default.createElement("div",{className:"headerFeatureButton headerCreateWidgets",onClick:function(){return e.openCreateWidget()}},i.default.createElement("img",{className:"ratingIcon",src:n(114)}),i.default.createElement("span",{className:"headerFeatureButtonText"},"Create Widgets")),i.default.createElement("div",{className:"headerFeatureButton headerStarPolls",onClick:function(){return e.openStarPolls()}},i.default.createElement("img",{className:"starIcon",src:c.default["Featured Polls"]}),i.default.createElement("span",{className:"headerFeatureButtonText"},"Featured Polls")),i.default.createElement("div",{className:"headerFeatureButton headerSocialPolls",onClick:function(){return e.openSocial()}},i.default.createElement("img",{className:"socialIcon",src:c.default.Social}),i.default.createElement("span",{className:"headerFeatureButtonText"},"Social"))))}}]),t}(o.Component);t.default=(0,d.withRouter)(p)},function(e,t){e.exports=require("babel-runtime/core-js/object/assign")},function(e,t,n){e.exports=n.p+"static/media/next-btn.a759cbaa.png"},function(e,t,n){e.exports=n.p+"static/media/poll_tick_icon.544b0463.png"},function(e,t){e.exports=require("crypto-js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(3)),r=c(n(0)),s=c(n(1)),l=c(n(4)),u=c(n(5)),o=n(2),i=c(o);function c(e){return e&&e.__esModule?e:{default:e}}n(212);var d=function(e){function t(){return(0,r.default)(this,t),(0,l.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this;return this.props.moreAvailable?this.props.loading?i.default.createElement("div",{className:"showMore"},"Loading..."):i.default.createElement("div",{className:"showMore",onClick:function(){return e.props.onClick()}},"Show more"):null}}]),t}(o.Component);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(n(30));t.default=(0,a.default)({Pol:n(42),Env:n(43),Lif:n(44),Hum:n(45),Oth:n(92),All:n(31),Jus:n(46),Spo:n(47),Ent:n(48),Tec:n(49),Pol_browse:n(93),Env_browse:n(94),Lif_browse:n(95),Hum_browse:n(96),Oth_browse:n(97),All_browse:n(98),Jus_browse:n(99),Spo_browse:n(100),Ent_browse:n(101),Tec_browse:n(102),Trending:n(103),"Ending Soon":n(104),Latest:n(105),"Featured Polls":n(106),"My Votes":n(107),"My Polls":n(108),Local:n(109),National:n(110),"Friends Voted On...":n(50),Social:n(50),"Political & Human Rights":n(42),"News & Current Events":n(45),"Lifestyle & Health":n(44),"Sports, Hobbies & Games":n(47),"Business & Finance":n(49),"Science & Nature":n(43),"Technology & Gadgets":n(46),"Arts & Entertainment":n(48),"Everything Else":n(111),Random:n(112),"All Categories":n(31)},"All Categories",n(31))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(3)),r=f(n(0)),s=f(n(1)),l=f(n(4)),u=f(n(5)),o=n(2),i=f(o),c=(f(n(10)),f(n(9)),f(n(32))),d=f(n(20));function f(e){return e&&e.__esModule?e:{default:e}}n(214);var p=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.state={sortOrder:"mostVotes"},n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"changeSortOrder",value:function(e){this.setState({sortOrder:e}),this.forceUpdate()}},{key:"applySortOrder",value:function(e){switch(this.state.sortOrder){case"mostVotes":e.sort(function(e,t){return t.pollVotes-e.pollVotes});break;case"endingSoonest":e.sort(function(e,t){return e.pollTime-t.pollTime});break;case"newest":e.sort(function(e,t){return t.pollTime-e.pollTime})}}},{key:"render",value:function(){var e=this;return i.default.createElement("div",{className:"fullScreenPollListContainer"},i.default.createElement("div",{className:"headerContainer"},this.props.showSortOrder&&i.default.createElement(d.default,{sortOrder:this.state.sortOrder,onChange:function(t){return e.changeSortOrder(t)}})),i.default.createElement("div",{className:"pollListContainer"},i.default.createElement("div",{className:"polls"},this.pollElements)))}},{key:"pollElements",get:function(){var e=this;return this.props.polls?this.props.polls.slice(0).map(function(t,n){return i.default.createElement(c.default,{poll:t,key:t.id,forceNormal:e.props.forceNormal})}):null}}]),t}(o.Component);p.defaultProps={showSortOrder:!0,forceNormal:!1},t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(3)),r=c(n(0)),s=c(n(1)),l=c(n(4)),u=c(n(5)),o=n(2),i=c(o);function c(e){return e&&e.__esModule?e:{default:e}}n(218);var d=[{name:"Most Votes",value:"mostVotes"},{name:"Ending Soon",value:"endingSoonest"},{name:"Newest",value:"newest"}],f=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e)),s=d.find(function(e){return e.value==n.props.sortOrder}).name;return n.state={sortOrder:s,listOpen:!1},n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"toggleList",value:function(e){this.setState({listOpen:e})}},{key:"setSelected",value:function(e){this.props.onChange(e.value),this.setState({listOpen:!1,sortOrder:e.name})}},{key:"render",value:function(){var e=this;return i.default.createElement("div",{className:"sortListWrapper",onMouseOver:function(){return e.toggleList(!0)},onMouseOut:function(){return e.toggleList(!1)}},i.default.createElement("div",{className:"sortListHeader"},i.default.createElement("div",{className:"sortListTitle"},this.state.sortOrder,i.default.createElement("img",{src:n(129)}))),this.listElements)}},{key:"listElements",get:function(){var e=this,t=this.state.listOpen?"sortList":"sortListDisabled";return i.default.createElement("ul",{className:t},d.map(function(t,n){return i.default.createElement("li",{className:"sortListItem",key:n,onClick:function(){return e.setSelected(t)}},t.name)}))}}]),t}(o.Component);t.default=f},function(e,t){e.exports=require("babel-runtime/core-js/json/stringify")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(13)),r=f(n(62)),s=f(n(24)),l=f(n(7)),u=f(n(8)),o=f(n(0)),i=f(n(1)),c=f(n(36)),d=f(n(37));f(n(63));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(t){(0,o.default)(this,e),this.auth=t||{},this.voteHistory=[],this.historyFetched=!1}return(0,i.default)(e,null,[{key:"request",value:function(){var e=(0,u.default)(l.default.mark(function e(t){var n,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,a=t,e.prev=2,e.next=5,c.default.post("https://node.clearpoll.com/Clearpoll",a);case 5:n=e.sent,e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),console.dir(e.t0),new Error("A network error occured");case 12:if("false"!==n.data.success){e.next=14;break}throw new Error(n.data.comment||"An unknown error occured");case 14:return e.abrupt("return",n.data);case 15:case"end":return e.stop()}},e,this,[[2,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"request2",value:function(){var e=(0,u.default)(l.default.mark(function e(t){var n,a,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,a=t,e.prev=2,r="https://business.nextechdevelopments.com/CPLB",e.next=6,c.default.post(r,a);case 6:n=e.sent,e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(2),console.dir(e.t0),new Error("A network error occured");case 13:return e.abrupt("return",n.data);case 14:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()}]),(0,i.default)(e,[{key:"getHasVoted",value:function(e){var t=this.voteHistory.find(function(t){return t.pollID==e});return t?{hasVoted:!0,answerId:t.answerID}:{}}},{key:"fetchHome",value:function(){var t=(0,u.default)(l.default.mark(function t(){var n,u,o=this;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"GetPollListHome"},this.auth));case 2:n=t.sent,this.voteHistory=n.voteHistory,this.historyFetched=!0,t.t0=l.default.keys(n);case 6:if((t.t1=t.t0()).done){t.next=13;break}if(u=t.t1.value,"object"==(0,r.default)(n[u])){t.next=10;break}return t.abrupt("continue",6);case 10:n[u]=n[u].map(function(e){if(e.id)return(0,a.default)(e,o.getHasVoted(e.id))}),t.next=6;break;case 13:return t.abrupt("return",n);case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"fetchPoll",value:function(){var t=(0,u.default)(l.default.mark(function t(n){var r,s,u,o,i,c;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.historyFetched){t.next=3;break}return t.next=3,this.fetchVotehistory();case 3:return t.next=5,e.request({function:"GetPoll",pollId:n});case 5:if(r=t.sent,s=(0,a.default)(this.getHasVoted(n),r.poll[0],{pollId:n}),!((0,d.default)(1e3*s.pollTime)<(0,d.default)())&&!s.hasVoted){t.next=18;break}return t.next=11,this.getPollResult(n);case 11:u=t.sent,(s=(0,a.default)(s,u.pollInfo[0],{pollId:n})).results=u.votesPerAnswer,s.votedOn=u.voted,s.pollVotes=u.totalVotes,t.next=22;break;case 18:return t.next=20,this.getPollAnswers(n);case 20:o=t.sent,s.answers=o.answer;case 22:if("Ratings"!=s.type){t.next=30;break}if(s.results){t.next=28;break}return t.next=26,e.request({function:"GetPublicPollResult",pollId:n});case 26:i=t.sent,s.results=i.votesPerAnswer;case 28:c=s.pollVotes,s.averageRating=0==c?0:s.results.reduce(function(e,t){return e+Number(t.answerText)*(t.voteCount/c)},0);case 30:return t.abrupt("return",s);case 31:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"fetchUnauthPoll",value:function(){var t=(0,u.default)(l.default.mark(function t(n){var r,s,u,o;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request({function:"GetPoll",pollId:n});case 2:return r=t.sent,s=(0,a.default)(this.getHasVoted(n),r.poll[0],{pollId:n}),console.dir(s),t.next=7,e.request({function:"GetPublicPollResult",pollId:n});case 7:return u=t.sent,(s=(0,a.default)(s,u.pollInfo[0],{pollId:n})).results=u.votesPerAnswer,s.votedOn=u.voted,s.pollVotes=u.totalVotes,"Ratings"==s.type&&(o=s.pollVotes,s.averageRating=0==o?0:s.results.reduce(function(e,t){return e+Number(t.answerText)*(t.voteCount/o)},0)),t.abrupt("return",s);case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"fetchVotehistory",value:function(){var t=(0,u.default)(l.default.mark(function t(n){var a;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"GetVoteHistory"},this.auth));case 2:return a=t.sent,this.voteHistory=a.voteHistory,this.historyFetched=!0,t.abrupt("return",this.voteHistory);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"voteOnPoll",value:function(){var t=(0,u.default)(l.default.mark(function t(n){var a;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.showOnFeed=n.showOnFeed?1:0,t.next=3,e.request((0,s.default)({function:"VoteOnPoll"},n,this.auth));case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getPollResult",value:function(){var t=(0,u.default)(l.default.mark(function t(n){var a;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"GetPollResult",pollId:n},this.auth));case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getPollAnswers",value:function(){var t=(0,u.default)(l.default.mark(function t(n){var a;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"GetPollAnswer",pollId:n},this.auth));case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getPollList",value:function(){var t=(0,u.default)(l.default.mark(function t(n){var r,u=this;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"GetPollList"},n,this.auth));case 2:return r=t.sent,this.voteHistory=r.voteHistory,t.abrupt("return",r.poll.map(function(e){return(0,a.default)(e,u.getHasVoted(e.id))}));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"doSearch",value:function(){var t=(0,u.default)(l.default.mark(function t(n){var r,u,o=this;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"SearchPolls",searchString:n},this.auth));case 2:return r=t.sent,this.voteHistory=r.voteHistory,u=r.poll.map(function(e){return(0,a.default)(e,o.getHasVoted(e.Id))}),t.abrupt("return",u);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getSocialFeed",value:function(){var t=(0,u.default)(l.default.mark(function t(n){var r,u,o=this;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"GetFeed"},n,this.auth));case 2:return r=t.sent,this.voteHistory=r.voteHistory,u=r.feed.map(function(e){return(0,a.default)(e,o.getHasVoted(e.pollId))}),t.abrupt("return",u);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getFriendRequests",value:function(){var t=(0,u.default)(l.default.mark(function t(){var n;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0,t.prev=1,t.next=4,e.request((0,s.default)({function:"GetFriendRequest"},this.auth));case 4:n=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n={requests:[]};case 10:return t.abrupt("return",n.requests);case 11:case"end":return t.stop()}},t,this,[[1,7]])}));return function(){return t.apply(this,arguments)}}()},{key:"getFriends",value:function(){var t=(0,u.default)(l.default.mark(function t(){var n;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"GetFriends"},this.auth));case 2:return n=t.sent,t.abrupt("return",n.friends);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getUserSettings",value:function(){var t=(0,u.default)(l.default.mark(function t(){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"GetUserSettings"},this.auth));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"muteFriend",value:function(){var t=(0,u.default)(l.default.mark(function t(n){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"MuteFriend",friendId:n},this.auth));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"unmuteFriend",value:function(){var t=(0,u.default)(l.default.mark(function t(n){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"UnmuteFriend",friendId:n},this.auth));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"ignoreFriendRequest",value:function(){var t=(0,u.default)(l.default.mark(function t(n){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"IgnoreFriendRequest",requestId:n},this.auth));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"searchUsername",value:function(){var t=(0,u.default)(l.default.mark(function t(n){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"SearchUsername",searchString:n},this.auth));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"sendFriendRequest",value:function(){var t=(0,u.default)(l.default.mark(function t(n){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"SendFriendRequest",friendId:n},this.auth));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"UserSignup",value:function(){var t=(0,u.default)(l.default.mark(function t(n){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request({function:"UserSignup",phoneNumber:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"approveFriendRequest",value:function(){var t=(0,u.default)(l.default.mark(function t(n){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"ApproveFriendRequest",requestId:n},this.auth));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"approveFriendRequest",value:function(){var t=(0,u.default)(l.default.mark(function t(n){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"ApproveFriendRequest",requestId:n},this.auth));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"saveWalletAddress",value:function(){var t=(0,u.default)(l.default.mark(function t(n){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"SaveEthereumWallet",wallet:n},this.auth));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getWalletAddress",value:function(){var t=(0,u.default)(l.default.mark(function t(){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.request((0,s.default)({function:"GetEthereumWallet"},this.auth));case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",{success:!1,error:t.t0.message});case 9:case"end":return t.stop()}},t,this,[[0,6]])}));return function(){return t.apply(this,arguments)}}()},{key:"deleteAccount",value:function(){var t=(0,u.default)(l.default.mark(function t(){return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request((0,s.default)({function:"DeleteAccount"},this.auth));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=p(n(3)),s=p(n(0)),l=p(n(1)),u=p(n(4)),o=p(n(5)),i=p(n(30)),c=n(2),d=p(c),f=p(n(18));function p(e){return e&&e.__esModule?e:{default:e}}n(226);var h=(a={Pol:{title:"Political & Human Rights"},Env:{title:"Science & Nature"},Lif:{title:"Lifestyle & Health"},Hum:{title:"News & Current Events"},Oth:{title:"Everything Else"},All:{title:"All Categories"},Jus:{title:"Technology & Gadgets"},Spo:{title:"Sports, Hobbies & Games"},Ent:{title:"Arts & Entertainment"},Tec:{title:"Business & Finance"}},(0,i.default)(a,"All",{title:"All Categories"}),(0,i.default)(a,"Star",{title:"Featured Polls"}),(0,i.default)(a,"MyVotes",{title:"My Votes"}),(0,i.default)(a,"MyPolls",{title:"My Polls"}),(0,i.default)(a,"Social",{title:"Social"}),a),m=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=h[this.props.category];return d.default.createElement("div",{className:"catSummaryHeader"},d.default.createElement("img",{src:f.default[e.title]}),d.default.createElement("span",null,e.title))}}]),t}(c.Component);t.default=m},function(e,t){e.exports=require("babel-runtime/helpers/extends")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(n(13)),r=l(n(0)),s=l(n(1));l(n(16));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,e),this.data=(0,a.default)({polls:{},searchResults:{},category:{},starPolls:[],myVotes:[],socialFeed:[],userSettings:{},authenticated:!0,phoneNumber:"",code:"",username:""},t),this.initialPage=!0}return(0,s.default)(e,[{key:"hydrateCheck",value:function(){return!!this.initialPage&&(this.initialPage=!1,!0)}},{key:"getPoll",value:function(e){return this.data.polls[e]}},{key:"setPoll",value:function(e,t){this.data.polls[e]=t}},{key:"setSearchResult",value:function(e,t){this.data.searchResults[e]=t}},{key:"setUsername",value:function(e){this.data.username=e}},{key:"getSearchResult",value:function(e){return this.data.searchResults[e]||[]}},{key:"setCategoryPolls",value:function(e,t){this.data.category[e]=t}},{key:"getCategoryPolls",value:function(e){return this.data.category[e]||[]}},{key:"getStarPolls",value:function(){return this.data.starPolls||[]}},{key:"setStarPolls",value:function(e){this.data.starPolls=e}},{key:"getMyVotes",value:function(){return this.data.myVotes||[]}},{key:"setMyVotes",value:function(e){this.data.myVotes=e}},{key:"getSocialFeed",value:function(){return this.data.socialFeed||[]}},{key:"setSocialFeed",value:function(e){this.data.socialFeed=e}},{key:"setPhoneNumber",value:function(e){this.data.phoneNumber=e}},{key:"setCode",value:function(e){this.data.code=e}},{key:"setUserSettings",value:function(e){this.data.userSettings=e}},{key:"getUserSettings",value:function(){return this.data.userSettings}},{key:"setAuthenticated",value:function(e){this.data.authenticated=e}},{key:"getAuthenticated",value:function(){return this.data.authenticated}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(7)),r=c(n(8)),s=c(n(0)),l=c(n(1)),u=c(n(22)),o=c(n(64)),i=c(n(65));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(){(0,s.default)(this,e)}return(0,l.default)(e,null,[{key:"login",value:function(){var e=(0,r.default)(a.default.mark(function e(t,n){var r,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={function:"DesktopSignup",username:t,desktopCode:n},e.next=3,u.default.request(r);case 3:if((s=e.sent).success){e.next=6;break}throw new Error("Invalid Auth");case 6:return e.abrupt("return",o.default.sign({phoneNumber:s.phoneNumber,userId:s.userId,code:s.code},i.default.signingKey));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"verify",value:function(e){var t=o.default.verify(e,i.default.signingKey);return{phoneNumber:t.phoneNumber,userId:t.userId,code:t.code}}}]),e}();t.default=d},function(e,t,n){e.exports=n.p+"static/media/question-icon.e5877c7e.png"},function(e,t,n){e.exports=n.p+"static/media/poll_clock_icon.05f75bb6.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=["rgba(1, 191, 193, 255)","rgba(239, 114, 69, 255)","rgba(126, 202, 111, 255)","rgba(240, 113, 140, 255)","rgba(183, 123, 198, 255)","rgba(138, 157, 190, 255)","rgba(205, 192, 52, 255)","rgba(86, 147, 209, 255)","rgba(200, 82, 151, 255)","rgba(70, 143, 157, 255)","rgba(29, 131, 133, 255)","rgba(231, 95, 93, 255)","rgba(118, 132, 42, 255)","rgba(71, 97, 184, 255)","rgba(160, 135, 63, 255)","rgba(73, 106, 150, 255)","rgba(140, 69, 106, 255)","rgba(170, 87, 64, 255)","rgba(154, 94, 106, 255)","rgba(172, 136, 115, 255)","rgba(117, 80, 121, 255)","rgba(98, 106, 120, 255)","rgba(62, 92, 111, 255)","rgba(119, 103, 219, 255)","rgba(61, 150, 180, 255)","rgba(75, 142, 126, 255)","rgba(88, 170, 124, 255)","rgba(114, 159, 110, 255)","rgba(133, 122, 107, 255)","rgba(159, 120, 76, 255)"]},function(e,t){e.exports=require("babel-runtime/helpers/defineProperty")},function(e,t,n){e.exports=n.p+"static/media/all_icon.51be82a5.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(3)),r=f(n(0)),s=f(n(1)),l=f(n(4)),u=f(n(5)),o=n(2),i=f(o),c=n(6),d=f(n(11));function f(e){return e&&e.__esModule?e:{default:e}}n(198);var p=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.poll=new d.default(e.poll),n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"openPoll",value:function(){this.props.history.push("/poll/"+this.poll.id)}},{key:"button",value:function(){var e=this;return this.poll.hasVoted||this.poll.hasExpired?i.default.createElement("span",{className:"pollVoteButton resultsButton",onClick:function(){return e.openPoll()}},"Results"):i.default.createElement("span",{className:"pollVoteButton",onClick:function(){return e.openPoll()}},"Vote")}},{key:"renderStar",value:function(){return i.default.createElement("div",{className:"starPoll"},i.default.createElement("div",{className:"pollTop"},i.default.createElement("div",{className:"pollStarImage"},i.default.createElement("img",{src:this.props.poll.twitterAvatar})),i.default.createElement("div",{className:"pollTopQuestion"},i.default.createElement("div",{className:"pollTopName"},this.props.poll.twitterName),i.default.createElement("div",{className:"pollTopQuestionText"},this.props.poll.question))),i.default.createElement("div",{className:"pollBottom"},i.default.createElement("span",{className:"pollVotes"},i.default.createElement("img",{src:n(15)}),this.props.poll.pollVotes),!this.poll.hasExpired&&i.default.createElement("span",{className:"pollTimeRemaining"},i.default.createElement("img",{src:n(28)}),this.poll.timeRemaining),this.button()))}},{key:"renderNormal",value:function(){return i.default.createElement("div",{className:"poll"},i.default.createElement("div",{className:"pollTop"},i.default.createElement("div",{className:"pollTopHeader"},i.default.createElement("span",{className:"pollNumber"},i.default.createElement("img",{src:n(33)}),this.poll.id),!this.poll.hasExpired&&i.default.createElement("span",{className:"pollTimeRemaining"},i.default.createElement("img",{src:n(28)}),this.poll.timeRemaining)),i.default.createElement("div",{className:"pollTopQuestion"},this.poll.question)),i.default.createElement("div",{className:"pollBottom"},i.default.createElement("span",{className:"pollVotes"},i.default.createElement("img",{src:n(15)}),this.poll.pollVotes),this.button()))}},{key:"render",value:function(){return this.props.forceNormal||"Star"!=this.poll.type?this.renderNormal():this.renderStar()}}]),t}(o.Component);p.defaultProps={forceNormal:!1},t.default=(0,c.withRouter)(p)},function(e,t,n){e.exports=n.p+"static/media/poll_hash_icon.d796e847.png"},function(e,t){e.exports=require("query-string")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("babel-runtime/core-js/promise")},function(e,t,n){e.exports=n.p+"static/media/google_play_icon.15797297.png"},function(e,t,n){e.exports=n.p+"static/media/app_store_icon.2928664f.svg"},function(e,t,n){e.exports=n.p+"static/media/flags.723494a4.png"},function(e,t,n){e.exports=n.p+"static/media/political_icon.4b4fa7f2.png"},function(e,t,n){e.exports=n.p+"static/media/science_icon.22621bb8.png"},function(e,t,n){e.exports=n.p+"static/media/lifestyle_icon.4f920170.png"},function(e,t,n){e.exports=n.p+"static/media/news_icon.eb3ab87e.png"},function(e,t,n){e.exports=n.p+"static/media/technology_icon.7d30c564.png"},function(e,t,n){e.exports=n.p+"static/media/sports_icon.acc4312c.png"},function(e,t,n){e.exports=n.p+"static/media/arts_icon.f440cb40.png"},function(e,t,n){e.exports=n.p+"static/media/business_icon.9ad593bd.png"},function(e,t,n){e.exports=n.p+"static/media/social_icon.b7b15409.png"},function(e,t,n){e.exports=n.p+"static/media/search_icon.85560f1c.png"},function(e,t,n){e.exports=n.p+"static/media/add_friends_icon.f0674b63.png"},function(e,t,n){e.exports=n.p+"static/media/friend_accept_icon.0bb1770c.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=h(n(24)),r=h(n(3)),s=h(n(0)),l=h(n(1)),u=h(n(4)),o=h(n(5)),i=n(2),c=h(i),d=n(6),f=h(n(25)),p=h(n(161));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){(0,s.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.props=e,n.store=e.store||new f.default(window.storeData),"undefined"!=typeof window&&window&&delete window.storeData,n}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this;return c.default.createElement(d.Switch,null,c.default.createElement(d.Route,{path:"/poll/:pollId/widget",render:function(t){return c.default.createElement(p.default,(0,a.default)({},t,{store:e.store}))}}))}}]),t}(i.Component);t.default=(0,d.withRouter)(m)},function(e,t,n){"use strict";var a=p(n(56)),r=(p(n(57)),p(n(58))),s=p(n(59)),l=p(n(60)),u=n(61),o=n(172),i=p(n(173)),c=p(n(174)),d=p(n(175)),f=p(n(176));function p(e){return e&&e.__esModule?e:{default:e}}s.default.isMaster?function(){console.log("Master "+process.pid+" is running");for(var e=l.default.cpus().length,t=0;t<e;t++)console.log("Forking process number "+t+"..."),s.default.fork()}():function(){console.log("Worker "+process.pid+" started...");var e=(0,a.default)();(0,r.default)(e),e.use(d.default.urlencoded({extended:!1})),e.use(d.default.json()),e.use((0,f.default)()),e.use("/public",a.default.static("public")),e.post("/api/auth",i.default.login),e.get("/logout",i.default.logout),e.get("/",u.Home),e.get("/login",u.Login),e.get("/poll/:pollId",u.Poll),e.get("/poll/:pollId/widget",o.WidgetPoll),e.get("/search",u.Search),e.get("/completed/:category*?",u.CompletedPolls),e.get("/browse/:category*?",u.CompletedPolls),e.get("/starPolls",u.StarPolls),e.get("/myVotes",u.MyVotes),e.get("/myPolls",u.MyPolls),e.get("/social",u.SocialFeed),e.get("/social/manageFriends",u.ManageFriends),e.get("/account",u.Account),e.get("/createWidget",u.CreateWidget),e.get("/rewards",u.Rewards),e.get("/signup",u.Signup),e.get("/signup2",u.Signup2),e.get("/signup3",u.Signup3),e.get("/finishSignup",u.FinishSignup),e.get("/rewards",u.Rewards),e.ws("/api/ws",c.default);var t=process.env.PORT||3001;e.listen(t)}()},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("express-ws")},function(e,t){e.exports=require("cluster")},function(e,t){e.exports=require("os")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FinishSignup=t.Signup3=t.Signup2=t.Signup=t.Rewards=t.CreateWidget=t.Account=t.ManageFriends=t.SocialFeed=t.MyPolls=t.MyVotes=t.StarPolls=t.CompletedPolls=t.Search=t.Poll=t.Login=t.Home=void 0;var a=y(n(13)),r=y(n(7)),s=y(n(21)),l=y(n(8)),u=function(){var e=(0,l.default)(r.default.mark(function e(t,n,s,l){var u,o,i,c;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=new f.default(l),o=new p.default,e.next=4,u.fetchPoll(s);case 4:i=e.sent,o.setAuthenticated(!0),o.setPoll(s,i),c=(0,a.default)({},w,{title:i.question}),T(t,n,c),V(t,n,o);case 10:case"end":return e.stop()}},e,this)}));return function(t,n,a,r){return e.apply(this,arguments)}}(),o=function(){var e=(0,l.default)(r.default.mark(function e(t,n,s,l){var u,o,i,c;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=new f.default(l),o=new p.default,e.next=4,u.fetchUnauthPoll(s);case 4:i=e.sent,o.setAuthenticated(!1),o.setPoll(s,i),c=(0,a.default)({},w,{title:i.question}),T(t,n,c),V(t,n,o);case 10:case"end":return e.stop()}},e,this)}));return function(t,n,a,r){return e.apply(this,arguments)}}(),i=y(n(2)),c=n(35),d=n(6),f=y(n(22)),p=y(n(25)),h=y(n(26)),m=y(n(66)),v=(y(n(54)),y(n(16))),g=y(n(171));function y(e){return e&&e.__esModule?e:{default:e}}var w={title:"Clearpoll Desktop",description:"ClearPoll - Vote on anything, any time. Earn crypto rewards for creating polls. Get the ClearPoll app now!",imageUrl:"https://web.clearpoll.com/public/share_thumbnail.png"},k=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a,l,u,o;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0,e.prev=1,a=h.default.verify(t.cookies._auth),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),n.redirect("/login"),e.abrupt("return");case 9:return T(t,n),l=new f.default(a),e.next=13,l.fetchHome();case 13:u=e.sent,v.default.AES.encrypt((0,s.default)(u),"Y;8)t,[;xzy9niU2$tL?"),o=new p.default({homePolls:u}),V(t,n,o);case 17:case"end":return e.stop()}},e,void 0,[[1,5]])}));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=new p.default({}),T(t,n),V(t,n,a);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=new p.default({}),T(t,n),V(t,n,a);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=new p.default({}),T(t,n),V(t,n,a);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=new p.default({}),T(t,n),V(t,n,a);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=new p.default({}),T(t,n),V(t,n,a);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a,s;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0,s=t.params.pollId;try{a=h.default.verify(t.cookies._auth)}catch(e){}t.params.pollId||n.status(404).end(),a?u(t,n,s,a):o(t,n,s);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a,s,l,u;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0,e.prev=1,a=h.default.verify(t.cookies._auth),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),n.redirect("/login"),e.abrupt("return");case 9:if(s=t.query.q){e.next=13;break}return n.status(404).end(),e.abrupt("return");case 13:return T(t,n),l=new f.default(a),u=new p.default,e.t1=u,e.t2=s,e.next=20,l.doSearch(s);case 20:e.t3=e.sent,e.t1.setSearchResult.call(e.t1,e.t2,e.t3),V(t,n,u);case 23:case"end":return e.stop()}},e,void 0,[[1,5]])}));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a,s,l,u,o,i;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0,e.prev=1,a=h.default.verify(t.cookies._auth),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),n.redirect("/login"),e.abrupt("return");case 9:if(T(t,n),s=t.url.startsWith("/completed"),l=new f.default(a),u=new p.default,!(o=t.params.category)){e.next=19;break}return e.next=17,l.getPollList({active:s?"false":"true",type:s?"Completed":"Normal",category:o,sortOrder:"mostVotes",recordStartNo:0,recordQty:20,positionLatitude:"",positionLongitude:"",locationFilter:"Global"});case 17:i=e.sent,u.setCategoryPolls(o,i);case 19:V(t,n,u);case 20:case"end":return e.stop()}},e,void 0,[[1,5]])}));return function(t,n){return e.apply(this,arguments)}}(),F=(function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a,s,l,u,o;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0,e.prev=1,a=h.default.verify(t.cookies._auth),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),n.redirect("/login"),e.abrupt("return");case 9:if(T(t,n),s=new f.default(a),l=new p.default,!(u=t.params.category)){e.next=18;break}return e.next=16,s.getPollList({active:"false",type:"Completed",category:u,sortOrder:"mostVotes",recordStartNo:0,recordQty:20,positionLatitude:"",positionLongitude:"",locationFilter:"Global"});case 16:o=e.sent,l.setCategoryPolls(u,o);case 18:V(t,n,l);case 19:case"end":return e.stop()}},e,void 0,[[1,5]])}))}(),function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a,s,l,u;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0,e.prev=1,a=h.default.verify(t.cookies._auth),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),n.redirect("/login"),e.abrupt("return");case 9:return T(t,n),s=new f.default(a),l=new p.default,e.next=14,s.getPollList({category:"All",type:"Star",active:"true",sortOrder:"mostVotes",recordStartNo:0,recordQty:12,positionLatitude:"",positionLongitude:"",locationFilter:""});case 14:u=e.sent,l.setStarPolls(u),V(t,n,l);case 17:case"end":return e.stop()}},e,void 0,[[1,5]])}));return function(t,n){return e.apply(this,arguments)}}()),M=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a,s,l,u;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0,e.prev=1,a=h.default.verify(t.cookies._auth),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),n.redirect("/login"),e.abrupt("return");case 9:return T(t,n),s=new f.default(a),l=new p.default,e.next=14,s.getPollList({category:"All",type:"MyVotes",active:"true",sortOrder:"mostVotes",recordStartNo:0,recordQty:20,positionLatitude:"",positionLongitude:"",locationFilter:""});case 14:u=e.sent,l.setMyVotes(u),V(t,n,l);case 17:case"end":return e.stop()}},e,void 0,[[1,5]])}));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a,s,l,u;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0,e.prev=1,a=h.default.verify(t.cookies._auth),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),n.redirect("/login"),e.abrupt("return");case 9:return T(t,n),s=new f.default(a),l=new p.default,e.next=14,s.getPollList({category:"All",type:"MyPolls",active:"true",sortOrder:"mostVotes",recordStartNo:0,recordQty:20,positionLatitude:"",positionLongitude:"",locationFilter:""});case 14:u=e.sent,l.setMyVotes(u),V(t,n,l);case 17:case"end":return e.stop()}},e,void 0,[[1,5]])}));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a,s,l,u;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0,e.prev=1,a=h.default.verify(t.cookies._auth),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),n.redirect("/login"),e.abrupt("return");case 9:return T(t,n),s=new f.default(a),l=new p.default,e.next=14,s.getSocialFeed({recordStartNo:0,recordQty:20});case 14:u=e.sent,l.setSocialFeed(u),V(t,n,l);case 17:case"end":return e.stop()}},e,void 0,[[1,5]])}));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a,s;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0,e.prev=1,a=h.default.verify(t.cookies._auth),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),n.redirect("/login"),e.abrupt("return");case 9:T(t,n),new f.default(a),s=new p.default,V(t,n,s);case 13:case"end":return e.stop()}},e,void 0,[[1,5]])}));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a,s,l,u;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0,e.prev=1,a=h.default.verify(t.cookies._auth),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),n.redirect("/login"),e.abrupt("return");case 9:return T(t,n),s=new f.default(a),l=new p.default,e.next=14,s.getUserSettings();case 14:u=e.sent,l.setUserSettings(u),V(t,n,l);case 17:case"end":return e.stop()}},e,void 0,[[1,5]])}));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:void 0,e.prev=1,h.default.verify(t.cookies._auth),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),n.redirect("/login"),e.abrupt("return");case 9:T(t,n),a=new p.default,V(t,n,a);case 12:case"end":return e.stop()}},e,void 0,[[1,5]])}));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=(0,l.default)(r.default.mark(function e(t,n){var a,s,l,u;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0,e.prev=1,a=h.default.verify(t.cookies._auth),e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(1),n.redirect("/login"),e.abrupt("return");case 9:return T(t,n),s=new f.default(a),l=new p.default,e.next=14,s.getUserSettings();case 14:u=e.sent,l.setUserSettings(u),V(t,n,l);case 17:case"end":return e.stop()}},e,void 0,[[1,5]])}));return function(t,n){return e.apply(this,arguments)}}();function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w,a=g.default.format({protocol:e.protocol,host:e.get("host"),pathname:e.originalUrl});t.writeHead(200,{"Content-Type":"text/html"}),t.write(U(a,n))}function V(e,t,n){var a=e.url,r=i.default.createElement(d.StaticRouter,{context:{},location:a},i.default.createElement(m.default,{store:n})),l=(0,c.renderToStaticNodeStream)(r),u=v.default.AES.encrypt((0,s.default)(n.data),"Y;8)t,[;xzy9niU2$tL?");l.pipe(t,{end:!1}),l.on("end",function(){t.end(B(u))})}var U=function(e,t){return'\n<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="initial-scale=1.0, width=device-width">\n  \t<link rel="shortcut icon" href="/public/favicon.png" type="image/x-icon" />\n\n    <meta property="og:url"         content="'+e+'" />\n    <meta property="og:type"        content="website" />\n    <meta property="og:title"       content="'+t.title+'" />\n    <meta property="og:description" content="'+t.description+'" />\n    <meta property="og:image"       content="'+t.imageUrl+'" />\n    <meta name="twitter:card" content="summary" />\n    <meta name="twitter:site" content="@voteclearpoll" />\n\n    <link href="/public/style.css" rel="stylesheet" type="text/css">\n\n    <title>Clearpoll Desktop</title>\n\n    <style>\n      @font-face {\n        font-family: \'Roboto-Light-CPL\';\n        src: url(\'/public/fonts/Roboto-Light.ttf\') format(\'truetype\');\n      }\n\n      html {\n          margin: 0;\n          padding: 0;\n          font-family: \'Roboto-Light-CPL\';\n      }\n\n      body {\n          position: absolute;\n          margin: 0;\n          padding: 0;\n          min-height: 100%;\n          float: left;\n          width: 100%;\n          background: #057cab; /* Old browsers */\n          background: -moz-linear-gradient(top, #019eba 1%, #057cab 11%, #234588 40%, #2c3372 60%, #24145e 80%, #271148 100%); /* FF3.6-15 */\n          background: -webkit-linear-gradient(top, #019eba 1%, #057cab 11%,#234588 40%,#2c3372 60%,#24145e 80%, #271148 100%); /* Chrome10-25,Safari5.1-6 */\n          background: linear-gradient(to bottom, #019eba 1%, #057cab 11%,#234588 40%,#2c3372 60%,#24145e 80%, #271148 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\n          filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=\'#019eba\', endColorstr=\'#24145e\',GradientType=0 ); background-attachment: fixed;\n          font-family: \'Roboto-Light-CPL\';\n      }\n    </style>\n  </head>\n  <body>\n    <div id="root" style="width: 100%; height: 100%; margin: 0; padding: 0;">\n'},B=function(e){return'\n      </div>\n      <script>\n        if(window.parent){\n          window.parent.postMessage({event: "loadingComplete"}, \'*\');\n          console.log("Message sent");\n        }\n        window.storeData = "'+e+'";\n      <\/script>\n      <script type="text/javascript" src="/public/bundle.js"><\/script>\n    </body>\n  </html>\n'};t.Home=k,t.Login=E,t.Poll=C,t.Search=S,t.CompletedPolls=P,t.StarPolls=F,t.MyVotes=M,t.MyPolls=R,t.SocialFeed=O,t.ManageFriends=q,t.Account=A,t.CreateWidget=I,t.Rewards=L,t.Signup=x,t.Signup2=_,t.Signup3=N,t.FinishSignup=b},function(e,t){e.exports=require("babel-runtime/helpers/typeof")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(n(21)),r=l(n(0)),s=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){(0,r.default)(this,e),this.state={}}return(0,s.default)(e,[{key:"isLoggedIn",value:function(){}},{key:"setAuth",value:function(e){var t={code:e.code,phoneNumber:e.phoneNumber,userId:e.userId};return localStorage.setItem("auth",(0,a.default)(t))}},{key:"auth",get:function(){var e=localStorage.getItem("auth");return e?JSON.parse(e):null}}]),e}();t.default=new u},function(e,t){e.exports=require("jsonwebtoken")},function(e){e.exports={signingKey:"ng0VKpTdXpLU747VYE0Z"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=O(n(24)),r=O(n(3)),s=O(n(0)),l=O(n(1)),u=O(n(4)),o=O(n(5)),i=n(2),c=O(i),d=n(6),f=(O(n(16)),O(n(67))),p=O(n(80)),h=O(n(84)),m=O(n(87)),v=O(n(88)),g=O(n(90)),y=O(n(91)),w=O(n(118)),k=O(n(128)),E=O(n(130)),b=O(n(133)),x=O(n(134)),_=O(n(135)),N=O(n(136)),C=O(n(150)),S=O(n(151)),P=O(n(154)),F=O(n(156)),M=O(n(25)),R=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(34));function O(e){return e&&e.__esModule?e:{default:e}}n(250);var q=function(e){function t(e){(0,s.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));n.props=e,n.store=e.store||new M.default(window.storeData),"undefined"!=typeof window&&window&&delete window.storeData;var a=R.parse(e.location.search);return n.storeContext=c.default.createContext(n.store),n.embedded=!!a.embedded,n}return(0,o.default)(t,e),(0,l.default)(t,[{key:"handleLogoClick",value:function(){this.store.getAuthenticated()?this.props.history.push("/"):this.props.history.push("/login")}},{key:"handleContactClick",value:function(){window.location="https://clearpoll.com/"}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"templateContainer"},c.default.createElement("div",{className:"templateInnerContainer"},!this.embedded&&c.default.createElement("div",{className:"templateHeader"},c.default.createElement("img",{src:n(160),onClick:function(){return e.handleLogoClick()}}),this.showMenu&&c.default.createElement(f.default,null)),c.default.createElement(d.Switch,null,c.default.createElement(d.Route,{path:"/rewards",render:function(t){return c.default.createElement(F.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/createWidget",render:function(t){return c.default.createElement(P.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/completed/:category?",render:function(t){return c.default.createElement(E.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/browse/:category?",render:function(t){return c.default.createElement(E.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/starPolls",render:function(t){return c.default.createElement(b.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/myVotes",render:function(t){return c.default.createElement(x.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/myPolls",render:function(t){return c.default.createElement(_.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/social/manageFriends",render:function(t){return c.default.createElement(C.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/social",render:function(t){return c.default.createElement(N.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/account",render:function(t){return c.default.createElement(S.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/search",render:function(t){return c.default.createElement(k.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/poll/:pollId",render:function(t){return c.default.createElement(w.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/login",render:function(t){return c.default.createElement(p.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/signup",render:function(t){return c.default.createElement(h.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/signup2",render:function(t){return c.default.createElement(m.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/signup3",render:function(t){return c.default.createElement(v.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/finishSignup",render:function(t){return c.default.createElement(g.default,(0,a.default)({},t,{store:e.store}))}}),c.default.createElement(d.Route,{path:"/",render:function(t){return c.default.createElement(y.default,(0,a.default)({},t,{store:e.store}))}}))),c.default.createElement("div",{className:"templateFooter"},"Ⓒ Copyright 2018 Nextech Developments - Australia |",c.default.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.handleContactClick()}}," Contact Us")))}},{key:"showMenu",get:function(){return this.store.getAuthenticated()&&"/login"!=this.props.location.pathname}}]),t}(i.Component);t.default=(0,d.withRouter)(q)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(n(3)),r=d(n(0)),s=d(n(1)),l=d(n(4)),u=d(n(5)),o=n(2),i=d(o),c=n(6);function d(e){return e&&e.__esModule?e:{default:e}}n(177);var f=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.state={active:!1},n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"toggleMenu",value:function(e){this.setState({active:e})}},{key:"openUrl",value:function(e){this.setState({active:!1}),this.props.history.push(e)}},{key:"openExternalUrl",value:function(e){window.location=e}},{key:"touchMenuOpen",value:function(){}},{key:"render",value:function(){var e=this;return i.default.createElement("div",{className:"menuContainer",onMouseOver:function(){return e.toggleMenu(!0)},onMouseOut:function(){return e.toggleMenu(!1)}},i.default.createElement("img",{src:n(68),onClick:function(){return e.touchMenuOpen()}}),i.default.createElement("div",{className:this.state.active?"menu":"menu inactive"},i.default.createElement("div",{onClick:function(){return e.openUrl("/browse")}},i.default.createElement("img",{src:n(69)}),"Vote"),i.default.createElement("div",{onClick:function(){return e.openUrl("/createWidget")}},i.default.createElement("img",{src:n(70)}),"Create Widgets"),i.default.createElement("div",{onClick:function(){return e.openUrl("/completed")}},i.default.createElement("img",{src:n(71)}),"View Completed Polls"),i.default.createElement("div",{onClick:function(){return e.openUrl("/social")}},i.default.createElement("img",{src:n(72)}),"Social"),i.default.createElement("div",{onClick:function(){return e.openUrl("/rewards")}},i.default.createElement("img",{src:n(73)}),"Rewards"),i.default.createElement("div",{onClick:function(){return e.openUrl("/myVotes")}},i.default.createElement("img",{src:n(74)}),"My Votes"),i.default.createElement("div",{onClick:function(){return e.openUrl("/myPolls")}},i.default.createElement("img",{src:n(75)}),"My Polls"),i.default.createElement("div",{onClick:function(){return e.openUrl("/starPolls")}},i.default.createElement("img",{src:n(76)}),"Featured Polls"),i.default.createElement("div",{onClick:function(){return e.openUrl("/account")}},i.default.createElement("img",{src:n(77)}),"Account & Settings"),i.default.createElement("div",{onClick:function(){return e.openExternalUrl("https://clearpoll.com/faq/")}},i.default.createElement("img",{src:n(78)}),"FAQ & Support"),i.default.createElement("div",{onClick:function(){return e.openExternalUrl("/logout")}},i.default.createElement("img",{src:n(79)}),"Logout")))}}]),t}(o.Component);t.default=(0,c.withRouter)(f)},function(e,t,n){e.exports=n.p+"static/media/menu_icon.287713b5.png"},function(e,t,n){e.exports=n.p+"static/media/vote_icon.13f4538e.png"},function(e,t,n){e.exports=n.p+"static/media/create_icon.9cf4b8ec.png"},function(e,t,n){e.exports=n.p+"static/media/completed_icon.0c7bda38.png"},function(e,t,n){e.exports=n.p+"static/media/social_icon.df189819.png"},function(e,t,n){e.exports=n.p+"static/media/rewards_icon.b5b10b45.png"},function(e,t,n){e.exports=n.p+"static/media/myvotes_icon.3eb514b4.png"},function(e,t,n){e.exports=n.p+"static/media/mypolls_icon.b67826c6.png"},function(e,t,n){e.exports=n.p+"static/media/star_icon.58cb01f9.png"},function(e,t,n){e.exports=n.p+"static/media/account_icon.c3348e90.png"},function(e,t,n){e.exports=n.p+"static/media/support_icon.fbef243a.png"},function(e,t,n){e.exports=n.p+"static/media/logout_icon.e5bdee5b.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=h(n(7)),r=h(n(8)),s=h(n(3)),l=h(n(0)),u=h(n(1)),o=h(n(4)),i=h(n(5)),c=n(2),d=h(c),f=(n(6),h(n(10))),p=h(n(9));function h(e){return e&&e.__esModule?e:{default:e}}n(184);var m=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.props=e,n.state={username:"",desktopCode:"",loading:!1},n.props.store.hydrateCheck(),n.props.store.setAuthenticated(!1),n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"faqRedirect",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"doLogin",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.username.length&&0!=this.state.desktopCode.length){e.next=2;break}return e.abrupt("return");case 2:return this.setState({loading:!0}),e.prev=3,e.next=6,p.default.login(this.state.username,this.state.desktopCode);case 6:if(e.sent){e.next=9;break}throw new Error("Incorrect username or desktop code");case 9:window.parent&&(window.parent.postMessage({event:"loggedIn"},"*"),this.props.store.setAuthenticated(!0)),this.props.history.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),alert(e.t0.message);case 16:this.setState({loading:!1});case 17:case"end":return e.stop()}},e,this,[[3,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"doSignup",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0});try{this.props.history.push("/signup")}catch(e){alert(e.message)}this.setState({loading:!1});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"loginContent"},d.default.createElement(f.default,{enabled:this.state.loading}),d.default.createElement("div",{className:"loginHeader"},d.default.createElement("img",{src:n(82),className:"whiteLogo"})),d.default.createElement("div",{className:"loginField"},d.default.createElement("span",{className:"loginFieldText"},"Username"),d.default.createElement("input",{type:"text",className:"loginFieldUsername",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})}})),d.default.createElement("div",{className:"loginField"},d.default.createElement("span",{className:"loginFieldText"},"Login Code"),d.default.createElement("input",{type:"text",className:"loginFieldDesktopCode",value:this.state.desktopCode,onChange:function(t){return e.setState({desktopCode:t.target.value})}}),d.default.createElement("a",{className:"faqButton",href:"https://clearpoll.com/faq",target:"_blank"},d.default.createElement("img",{src:n(27),className:"faqIcon"}))),d.default.createElement("div",{className:"loginSubText"},'You can find your code inside the ClearPoll app under "Desktop Connect" in the main menu'),d.default.createElement("button",{className:"loginButton",onClick:this.doLogin.bind(this)},"Login"),d.default.createElement("button",{className:"signupButton",onClick:this.doSignup.bind(this)},"Sign Up",d.default.createElement("img",{src:n(83),className:"signupImage"})),d.default.createElement("div",{className:"installBanner"},d.default.createElement("div",{className:"installBannerText"},"Get the ClearPoll App!"),d.default.createElement("div",{className:"installBannerImages"},d.default.createElement("a",{href:"https://play.google.com/store/apps/details?id=com.nextechdevelopments.clearpoll",target:"_blank"},d.default.createElement("img",{src:n(39)})),d.default.createElement("a",{href:"https://itunes.apple.com/us/app/clearpoll/id1347664374",target:"_blank"},d.default.createElement("img",{src:n(40)})))))}}]),t}(c.Component);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(21)),r=i(n(13)),s=i(n(38)),l=i(n(0)),u=i(n(1)),o=i(n(16));function i(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,l.default)(this,e),this.open=!1,this._msgId=0,this._pendingPromises={}}return(0,u.default)(e,[{key:"connect",value:function(){var e=this;return new s.default(function(t){var n="https:"!=location.protocol?"ws://":"wss://";e.socket=new WebSocket(n+location.host+"/api/ws"),e.socket.addEventListener("open",function(n){e.open=!0,t()}),e.socket.addEventListener("close",e.handleError.bind(e)),e.socket.addEventListener("message",e.handleMessage.bind(e))})}},{key:"handleError",value:function(){var e=this;this.open=!1,setTimeout(function(){return e.connect()},1e3)}},{key:"handleMessage",value:function(e){var t=o.default.AES.decrypt(e.data,"Y;8)t,[;xzy9niU2$tL?").toString(o.default.enc.Utf8),n=JSON.parse(t),a=this._pendingPromises[n.id];a&&a.res(n)}},{key:"request",value:function(e){var t=this;return new s.default(function(n,s){t._pendingPromises[++t._msgId]={res:n,rej:s};var l=(0,r.default)(e,{id:t._msgId});l=o.default.AES.encrypt((0,a.default)(l),"Y;8)t,[;xzy9niU2$tL?"),t.socket.send(l)})}}]),e}();t.default=c},function(e,t,n){e.exports=n.p+"static/media/white-logo.2455390a.png"},function(e,t,n){e.exports=n.p+"static/media/pencil.73c1a06d.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=m(n(7)),r=m(n(8)),s=m(n(3)),l=m(n(0)),u=m(n(1)),o=m(n(4)),i=m(n(5)),c=n(2),d=m(c),f=(n(6),m(n(10))),p=m(n(9)),h=(m(n(85)),m(n(86)));function m(e){return e&&e.__esModule?e:{default:e}}n(186);var v=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.props=e,n.state={username:"",phoneNumber:"",countryCode:"",country:"us",loading:!1,showError:!1},n.props.store.hydrateCheck(),n.getFlag(),n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"doLogin",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.phoneNumber.length){e.next=2;break}return e.abrupt("return");case 2:return this.setState({loading:!0}),e.prev=3,e.next=6,p.default.UserSignup(this.state.phoneNumber);case 6:if(t=e.sent){e.next=9;break}throw new Error("Incorrect username or desktop code");case 9:"false"==t.newUser?this.setState({showError:!0}):(this.props.store.setPhoneNumber(t.phoneNumber),this.props.history.push("/signup2")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),alert(e.t0.message);case 15:this.setState({loading:!1});case 16:case"end":return e.stop()}},e,this,[[3,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"getFlag",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.default.GetCountry();case 3:if(t=e.sent){e.next=6;break}throw new Error("Incorrect username or desktop code");case 6:this.setState({countryCode:t.callingCode,country:t.country.toLowerCase(),phoneNumber:t.callingCode}),this.forceUpdate(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0.message);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"doSignup",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0});try{this.props.history.push("/Signup")}catch(e){alert(e.message)}this.setState({loading:!1});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return 0==this.state.showError?d.default.createElement("div",{className:"loginContent"},d.default.createElement(f.default,{enabled:this.state.loading}),d.default.createElement("div",{className:"loginHeader"},"Create a ClearPoll Account"),d.default.createElement("div",{className:"signupDesc"},"Please enter your mobile phone number to recieve a 6-digit SMS code"),d.default.createElement("br",null),d.default.createElement("div",{className:"loginField"},d.default.createElement("span",{className:"loginFieldText"},"Mobile"),d.default.createElement("div",{className:"InputFlagHolder"},d.default.createElement(h.default,{defaultCountry:"us",flagsImagePath:n(41),onChange:function(t){return e.setState({phoneNumber:t})},value:this.state.phoneNumber,preferredCountries:["au","us","gb"]})),d.default.createElement("a",{className:"faqButton2",href:"https://ClearPoll.com/faq",target:"_blank"},d.default.createElement("img",{src:n(27),className:"faqIcon"}))),d.default.createElement("button",{className:"loginButton",onClick:this.doLogin.bind(this)},d.default.createElement("img",{src:n(14),className:"nextButton"})),d.default.createElement("br",null),d.default.createElement("div",{className:"signupDesc3"},"We will never send you unsolicited messages or make your personal details available to any third parties."),d.default.createElement("div",{className:"signupDesc"},d.default.createElement("a",{href:"https://www.iubenda.com/privacy-policy/73812586",title:"Privacy Policy",target:"_blank"},d.default.createElement("font",{color:"#ffffff"},"Privacy Policy")))):d.default.createElement("div",{className:"loginContent"},d.default.createElement(f.default,{enabled:this.state.loading}),d.default.createElement("div",{className:"loginHeader"},"Create a ClearPoll Account"),d.default.createElement("div",{className:"signupDesc"},"Please enter your mobile phone number to recieve a 6-digit SMS code"),d.default.createElement("br",null),d.default.createElement("div",{className:"loginField"},d.default.createElement("span",{className:"loginFieldText"},"Mobile"),d.default.createElement("div",{className:"InputFlagHolder"},d.default.createElement(h.default,{defaultCountry:"us",flagsImagePath:n(41),onChange:function(t){return e.setState({phoneNumber:t})},value:this.state.phoneNumber,preferredCountries:["au","us","gb"]})),d.default.createElement("a",{className:"faqButton2",href:"https://ClearPoll.com/faq",target:"_blank"},d.default.createElement("img",{src:n(27),className:"faqIcon"}))),d.default.createElement("button",{className:"loginButton",onClick:this.doLogin.bind(this)},d.default.createElement("img",{src:n(14),className:"nextButton"})),d.default.createElement("br",null),d.default.createElement("div",{className:"signupBox"},d.default.createElement("div",{className:"signupDesc2"},"This mobile number is already linked to a ClearPoll account."),d.default.createElement("div",{className:"signupDesc3"},'To retrieve your login code, install the ClearPoll app and then visit the "Desktop Connect" page in the app menu.')))}}]),t}(c.Component);t.default=v},function(e,t){e.exports=require("react-country-flag")},function(e,t){e.exports=require("react-telephone-input")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=h(n(7)),r=h(n(8)),s=h(n(3)),l=h(n(0)),u=h(n(1)),o=h(n(4)),i=h(n(5)),c=n(2),d=h(c),f=(n(6),h(n(10))),p=h(n(9));function h(e){return e&&e.__esModule?e:{default:e}}n(188);var m=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.props=e,n.state={username:"",phoneNumber:"",code:"",loading:!1},n.props.store.hydrateCheck(),n.setState({phoneNumber:n.props.store.data.phoneNumber}),n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"doLogin",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.code.length&&0!=this.props.store.data.phoneNumber.length){e.next=2;break}return e.abrupt("return");case 2:return this.setState({loading:!0}),e.prev=3,e.next=6,p.default.UserSignup2(this.props.store.data.phoneNumber,this.state.code);case 6:if(t=e.sent){e.next=9;break}throw new Error("Incorrect username or desktop code");case 9:"false"==t.signupComplete?(this.props.store.setCode(this.state.code),this.props.history.push("/signup3")):this.props.history.push("/"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),alert(e.t0.message);case 15:this.setState({loading:!1});case 16:case"end":return e.stop()}},e,this,[[3,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"doSignup",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0});try{this.props.history.push("/Signup")}catch(e){alert(e.message)}this.setState({loading:!1});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"loginContent"},d.default.createElement(f.default,{enabled:this.state.loading}),d.default.createElement("div",{className:"loginHeader"},"Create a Clearpoll Account"),d.default.createElement("div",{className:"signupDesc"},"Please enter your 6-digit SMS code:"),d.default.createElement("br",null),d.default.createElement("div",{className:"loginField2"},d.default.createElement("span",{className:"loginField2Text"},"SMS Code"),d.default.createElement("input",{type:"text",className:"loginField2DesktopCode",value:this.state.code,onChange:function(t){return e.setState({code:t.target.value})}}),d.default.createElement("a",{className:"faqButton",href:"https://clearpoll.com/faq",target:"_blank"},d.default.createElement("img",{src:n(27),className:"faqIcon"}))),d.default.createElement("button",{className:"loginButton",onClick:this.doLogin.bind(this)},d.default.createElement("img",{src:n(14),className:"nextButton"})),d.default.createElement("br",null),d.default.createElement("div",{className:"signupDesc"},"Not recieving your SMS code? ",d.default.createElement("a",{href:"https://clearpoll.com/faq",target:"_blank"},d.default.createElement("font",{color:"#ffffff"},"FAQs & Support"))))}}]),t}(c.Component);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=m(n(7)),r=m(n(8)),s=m(n(3)),l=m(n(0)),u=m(n(1)),o=m(n(4)),i=m(n(5)),c=n(2),d=m(c),f=(n(6),m(n(10))),p=m(n(9)),h=m(n(89));function m(e){return e&&e.__esModule?e:{default:e}}n(190);var v=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.handleChange=function(e){n.setState({recaptcha:e})},n.props=e,n.state={username:"",phoneNumber:"",code:"",birthYear:"",sex:"",userName:"",loading:!1,showError:!1,recaptcha:null},n.props.store.hydrateCheck(),n.setState({phoneNumber:n.props.store.data.phoneNumber,recaptcha:null}),n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"setFemale",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({sex:"f"});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setMale",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({sex:"m"});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"doUsername",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.userName.length){e.next=2;break}return e.abrupt("return");case 2:return this.setState({loading:!0}),e.prev=3,e.next=6,p.default.CheckUsername(this.state.userName);case 6:if(t=e.sent){e.next=9;break}throw new Error("Incorrect username or desktop code");case 9:"true"==t.usernameTaken?this.setState({showError:!0}):(this.setState({showError:!1}),this.doLogin.bind(this)),0==this.state.showError&&this.doLogin(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),alert(e.t0.message);case 16:this.setState({loading:!1});case 17:case"end":return e.stop()}},e,this,[[3,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"doLogin",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.props.store.data.code.length&&0!=this.props.store.data.phoneNumber.length&&0!=this.state.birthYear.length&&0!=this.state.sex.length&&0!=this.state.userName.length&&null!=this.state.recaptcha){e.next=2;break}return e.abrupt("return");case 2:return this.setState({loading:!0}),e.prev=3,e.next=6,p.default.UserSignup3(this.props.store.data.phoneNumber,this.props.store.data.code,this.state.birthYear,this.state.sex,this.state.userName);case 6:if(t=e.sent){e.next=9;break}throw new Error("Incorrect username or desktop code");case 9:if("true"!=t.success||"true"!=t.signupComplete){e.next=21;break}return e.prev=10,e.next=13,p.default.SendStat(this.state.username);case 13:e.sent,this.props.store.setUsername(this.state.userName),this.props.history.push("/finishSignup"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),alert(e.t0.message);case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(3),alert(e.t1.message);case 26:this.setState({loading:!1});case 27:case"end":return e.stop()}},e,this,[[3,23],[10,18]])}));return function(){return e.apply(this,arguments)}}()},{key:"doSignup",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0});try{this.props.history.push("/Signup")}catch(e){alert(e.message)}this.setState({loading:!1});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(0==this.state.showError){if(""==this.state.sex)return d.default.createElement("div",{className:"loginContent"},d.default.createElement(f.default,{enabled:this.state.loading}),d.default.createElement("div",{className:"loginHeader"},"Create a Clearpoll Account"),d.default.createElement("div",{className:"signupDesc2"},"Tell us a little about yourself..."),d.default.createElement("div",{className:"signupDesc"},"Don't worry, no personal information will be made public."),d.default.createElement("br",null),d.default.createElement("div",{className:"loginField2"},d.default.createElement("span",{className:"loginField2Text"},"Birth Year"),d.default.createElement("input",{type:"text",className:"loginField2DesktopCode",value:this.state.birthYear,onChange:function(t){return e.setState({birthYear:t.target.value})}})),d.default.createElement("div",{className:"SexButtons"},d.default.createElement("button",{className:"sexButton",onClick:this.setMale.bind(this)},"Male"),d.default.createElement("button",{className:"sexButton3",onClick:this.setFemale.bind(this)},"Female")),d.default.createElement("div",{className:"loginField2"},d.default.createElement("span",{className:"loginField2Text"},"Username"),d.default.createElement("input",{type:"text",className:"loginField2DesktopCode",value:this.state.userName,onChange:function(t){return e.setState({userName:t.target.value})}})),d.default.createElement(h.default,{sitekey:"6LebY3EUAAAAAF-uUe5N2wNV7G2sPotP-XGDwJ7G",onChange:this.handleChange,style:{"margin-top":"10px"}}),d.default.createElement("button",{className:"loginButton",onClick:this.doUsername.bind(this)},d.default.createElement("img",{src:n(14),className:"nextButton"})));if("m"==this.state.sex)return d.default.createElement("div",{className:"loginContent"},d.default.createElement(f.default,{enabled:this.state.loading}),d.default.createElement("div",{className:"loginHeader"},"Create a Clearpoll Account"),d.default.createElement("div",{className:"signupDesc2"},"Tell us a little about yourself..."),d.default.createElement("div",{className:"signupDesc"},"Don't worry, no personal information will be made public."),d.default.createElement("br",null),d.default.createElement("div",{className:"loginField2"},d.default.createElement("span",{className:"loginField2Text"},"Birth Year"),d.default.createElement("input",{type:"text",className:"loginField2DesktopCode",value:this.state.birthYear,onChange:function(t){return e.setState({birthYear:t.target.value})}})),d.default.createElement("div",{className:"SexButtons"},d.default.createElement("button",{className:"sexButton2",onClick:this.setMale.bind(this)},"Male"),d.default.createElement("button",{className:"sexButton3",onClick:this.setFemale.bind(this)},"Female")),d.default.createElement("div",{className:"loginField2"},d.default.createElement("span",{className:"loginField2Text"},"Username"),d.default.createElement("input",{type:"text",className:"loginField2DesktopCode",value:this.state.userName,onChange:function(t){return e.setState({userName:t.target.value})}})),d.default.createElement(h.default,{sitekey:"6LebY3EUAAAAAF-uUe5N2wNV7G2sPotP-XGDwJ7G",onChange:this.handleChange,style:{"margin-top":"10px"}}),d.default.createElement("button",{className:"loginButton",onClick:this.doUsername.bind(this)},d.default.createElement("img",{src:n(14),className:"nextButton"})));if("f"==this.state.sex)return d.default.createElement("div",{className:"loginContent"},d.default.createElement(f.default,{enabled:this.state.loading}),d.default.createElement("div",{className:"loginHeader"},"Create a Clearpoll Account"),d.default.createElement("div",{className:"signupDesc2"},"Tell us a little about yourself..."),d.default.createElement("div",{className:"signupDesc"},"Don't worry, no personal information will be made public."),d.default.createElement("br",null),d.default.createElement("div",{className:"loginField2"},d.default.createElement("span",{className:"loginField2Text"},"Birth Year"),d.default.createElement("input",{type:"text",className:"loginField2DesktopCode",value:this.state.birthYear,onChange:function(t){return e.setState({birthYear:t.target.value})}})),d.default.createElement("div",{className:"SexButtons"},d.default.createElement("button",{className:"sexButton",onClick:this.setMale.bind(this)},"Male"),d.default.createElement("button",{className:"sexButton4",onClick:this.setFemale.bind(this)},"Female")),d.default.createElement("div",{className:"loginField2"},d.default.createElement("span",{className:"loginField2Text"},"Username"),d.default.createElement("input",{type:"text",className:"loginField2DesktopCode",value:this.state.userName,onChange:function(t){return e.setState({userName:t.target.value})}})),d.default.createElement(h.default,{sitekey:"6LebY3EUAAAAAF-uUe5N2wNV7G2sPotP-XGDwJ7G",onChange:this.handleChange,style:{"margin-top":"10px"}}),d.default.createElement("button",{className:"loginButton",onClick:this.doUsername.bind(this)},d.default.createElement("img",{src:n(14),className:"nextButton"})))}else{if(""==this.state.sex)return d.default.createElement("div",{className:"loginContent"},d.default.createElement(f.default,{enabled:this.state.loading}),d.default.createElement("div",{className:"loginHeader"},"Create a Clearpoll Account"),d.default.createElement("div",{className:"signupDesc2"},"Tell us a little about yourself..."),d.default.createElement("div",{className:"signupDesc"},"Don't worry, no personal information will be made public."),d.default.createElement("br",null),d.default.createElement("div",{className:"loginField2"},d.default.createElement("span",{className:"loginField2Text"},"Birth Year"),d.default.createElement("input",{type:"text",className:"loginField2DesktopCode",value:this.state.birthYear,onChange:function(t){return e.setState({birthYear:t.target.value})}})),d.default.createElement("div",{className:"SexButtons"},d.default.createElement("button",{className:"sexButton",onClick:this.setMale.bind(this)},"Male"),d.default.createElement("button",{className:"sexButton3",onClick:this.setFemale.bind(this)},"Female")),d.default.createElement("div",{className:"loginField2"},d.default.createElement("span",{className:"loginField2Text"},"Username"),d.default.createElement("input",{type:"text",className:"loginField2DesktopCode",value:this.state.userName,onChange:function(t){return e.setState({userName:t.target.value})}})),d.default.createElement("div",{className:"ErrorText"},d.default.createElement("div",{className:"errorText"},"Username taken. Please try a different one.")),d.default.createElement(h.default,{sitekey:"6LebY3EUAAAAAF-uUe5N2wNV7G2sPotP-XGDwJ7G",onChange:this.handleChange,style:{"margin-top":"10px"}}),d.default.createElement("button",{className:"loginButton",onClick:this.doUsername.bind(this)},d.default.createElement("img",{src:n(14),className:"nextButton"})));if("m"==this.state.sex)return d.default.createElement("div",{className:"loginContent"},d.default.createElement(f.default,{enabled:this.state.loading}),d.default.createElement("div",{className:"loginHeader"},"Create a Clearpoll Account"),d.default.createElement("div",{className:"signupDesc2"},"Tell us a little about yourself..."),d.default.createElement("div",{className:"signupDesc"},"Don't worry, no personal information will be made public."),d.default.createElement("br",null),d.default.createElement("div",{className:"loginField2"},d.default.createElement("span",{className:"loginField2Text"},"Birth Year"),d.default.createElement("input",{type:"text",className:"loginField2DesktopCode",value:this.state.birthYear,onChange:function(t){return e.setState({birthYear:t.target.value})}})),d.default.createElement("div",{className:"SexButtons"},d.default.createElement("button",{className:"sexButton2",onClick:this.setMale.bind(this)},"Male"),d.default.createElement("button",{className:"sexButton3",onClick:this.setFemale.bind(this)},"Female")),d.default.createElement("div",{className:"loginField2"},d.default.createElement("span",{className:"loginField2Text"},"Username"),d.default.createElement("input",{type:"text",className:"loginField2DesktopCode",value:this.state.userName,onChange:function(t){return e.setState({userName:t.target.value})}})),d.default.createElement("div",{className:"ErrorText"},d.default.createElement("div",{className:"errorText"},"Username taken. Please try a different one.")),d.default.createElement(h.default,{sitekey:"6LebY3EUAAAAAF-uUe5N2wNV7G2sPotP-XGDwJ7G",onChange:this.handleChange,style:{"margin-top":"10px"}}),d.default.createElement("button",{className:"loginButton",onClick:this.doUsername.bind(this)},d.default.createElement("img",{src:n(14),className:"nextButton"})));if("f"==this.state.sex)return d.default.createElement("div",{className:"loginContent"},d.default.createElement(f.default,{enabled:this.state.loading}),d.default.createElement("div",{className:"loginHeader"},"Create a Clearpoll Account"),d.default.createElement("div",{className:"signupDesc2"},"Tell us a little about yourself..."),d.default.createElement("div",{className:"signupDesc"},"Don't worry, no personal information will be made public."),d.default.createElement("br",null),d.default.createElement("div",{className:"loginField2"},d.default.createElement("span",{className:"loginField2Text"},"Birth Year"),d.default.createElement("input",{type:"text",className:"loginField2DesktopCode",value:this.state.birthYear,onChange:function(t){return e.setState({birthYear:t.target.value})}})),d.default.createElement("div",{className:"SexButtons"},d.default.createElement("button",{className:"sexButton",onClick:this.setMale.bind(this)},"Male"),d.default.createElement("button",{className:"sexButton4",onClick:this.setFemale.bind(this)},"Female")),d.default.createElement("div",{className:"loginField2"},d.default.createElement("span",{className:"loginField2Text"},"Username"),d.default.createElement("input",{type:"text",className:"loginField2DesktopCode",value:this.state.userName,onChange:function(t){return e.setState({userName:t.target.value})}})),d.default.createElement("div",{className:"ErrorText"},d.default.createElement("div",{className:"errorText"},"Username taken. Please try a different one.")),d.default.createElement(h.default,{sitekey:"6LebY3EUAAAAAF-uUe5N2wNV7G2sPotP-XGDwJ7G",onChange:this.handleChange,style:{"margin-top":"10px"}}),d.default.createElement("button",{className:"loginButton",onClick:this.doUsername.bind(this)},d.default.createElement("img",{src:n(14),className:"nextButton"})))}}}]),t}(c.Component);t.default=v},function(e,t){e.exports=require("react-google-recaptcha")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=h(n(7)),r=h(n(8)),s=h(n(3)),l=h(n(0)),u=h(n(1)),o=h(n(4)),i=h(n(5)),c=n(2),d=h(c),f=(n(6),h(n(10))),p=h(n(9));function h(e){return e&&e.__esModule?e:{default:e}}n(192);var m=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.props=e,n.state={username:"",phoneNumber:"",desktopCode:"",code:"",birthYear:"",sex:"",userName:"",loading:!1},n.props.store.hydrateCheck(),n.setState({phoneNumber:n.props.store.data.phoneNumber}),n.getCode(),n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"getCode",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.default.GetDesktopCode(this.props.store.data.phoneNumber,this.props.store.data.code);case 3:if(t=e.sent){e.next=6;break}throw new Error("Incorrect username or desktop code");case 6:t.success&&this.setState({desktopCode:t.desktopCode}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0.message);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"doLogin",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.props.store.data.username.length&&0!=this.state.desktopCode.length){e.next=2;break}return e.abrupt("return");case 2:return this.setState({loading:!0}),e.prev=3,e.next=6,p.default.login(this.props.store.data.username,this.state.desktopCode);case 6:if(e.sent){e.next=9;break}throw new Error("Incorrect username or desktop code");case 9:window.parent&&(window.parent.postMessage({event:"loggedIn"},"*"),this.props.store.setAuthenticated(!0)),this.props.history.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),alert(e.t0.message);case 16:this.setState({loading:!1});case 17:case"end":return e.stop()}},e,this,[[3,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"doSignup",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0});try{this.props.history.push("/Signup")}catch(e){alert(e.message)}this.setState({loading:!1});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return d.default.createElement("div",{className:"loginContent"},d.default.createElement(f.default,{enabled:this.state.loading}),d.default.createElement("div",{className:"loginHeader"},"ClearPoll Account Created!"),d.default.createElement("div",{className:"signupDesc2"},"Your unique login code is"),d.default.createElement("br",null),d.default.createElement("div",{className:"loginField2"},d.default.createElement("input",{type:"text",className:"loginFieldDesktopCode",value:this.state.desktopCode})),d.default.createElement("button",{className:"loginButton",onClick:this.doLogin.bind(this)},"Login"),d.default.createElement("div",{className:"nonImportantText"},d.default.createElement("font",{color:"#01bec0"},"IMPORTANT: ")," DO NOT LOSE THIS CODE."),d.default.createElement("div",{className:"signupDesc"},"You will need it, along with your username, everytime you login to ClearPoll."),d.default.createElement("div",{className:"signupDesc1"},"Remember it, write it down, email it to yourself if you wish. Please keep it handy!"))}}]),t}(c.Component);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=v(n(7)),r=v(n(8)),s=v(n(3)),l=v(n(0)),u=v(n(1)),o=v(n(4)),i=v(n(5)),c=n(2),d=v(c),f=(n(6),v(n(9))),p=v(n(10)),h=v(n(12)),m=v(n(115));function v(e){return e&&e.__esModule?e:{default:e}}n(204);var g=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.store=e.store,n.state={loading:!1},n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){0}},{key:"webFetch",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.store.hydrateCheck()){e.next=3;break}return this.setState({loading:!1}),e.abrupt("return");case 3:return this.setState({loading:!0}),e.prev=4,e.next=7,f.default.fetchHome();case 7:this.store.data.homePolls=e.sent,this.setState({loading:!1}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),this.props.history.push("/login");case 14:case"end":return e.stop()}},e,this,[[4,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return d.default.createElement("div",{className:"App"},d.default.createElement(p.default,{enabled:this.state.loading}),d.default.createElement(h.default,null),!this.state.loading&&d.default.createElement(m.default,{polls:this.store.data.homePolls}))}}]),t}(c.Component);t.default=g},function(e,t,n){e.exports=n.p+"static/media/other_icon.51be82a5.png"},function(e,t,n){e.exports=n.p+"static/media/political_icon.2883cc12.png"},function(e,t,n){e.exports=n.p+"static/media/science_icon.6007ba38.png"},function(e,t,n){e.exports=n.p+"static/media/lifestyle_icon.eac6edf7.png"},function(e,t,n){e.exports=n.p+"static/media/news_icon.a6ff7d81.png"},function(e,t,n){e.exports=n.p+"static/media/other_icon.3702b31e.png"},function(e,t,n){e.exports=n.p+"static/media/all_icon.51b565fe.png"},function(e,t,n){e.exports=n.p+"static/media/technology_icon.308753f0.png"},function(e,t,n){e.exports=n.p+"static/media/sports_icon.1760ee57.png"},function(e,t,n){e.exports=n.p+"static/media/arts_icon.b520a344.png"},function(e,t,n){e.exports=n.p+"static/media/business_icon.edf912ab.png"},function(e,t,n){e.exports=n.p+"static/media/trending_icon.9c09b7ce.png"},function(e,t,n){e.exports=n.p+"static/media/endingsoon_icon.b0d02bb9.png"},function(e,t,n){e.exports=n.p+"static/media/latestPolls_icon.960154f2.png"},function(e,t,n){e.exports=n.p+"static/media/starPolls_icon.25f3f611.png"},function(e,t,n){e.exports=n.p+"static/media/myVotes_icon.dca7aee0.png"},function(e,t,n){e.exports=n.p+"static/media/myPolls_icon.cf1ac01e.png"},function(e,t,n){e.exports=n.p+"static/media/local_icon.fe40b3de.png"},function(e,t,n){e.exports=n.p+"static/media/national_icon.bda8bb84.png"},function(e,t,n){e.exports=n.p+"static/media/everythingElse_icon.42f60e81.png"},function(e,t,n){e.exports=n.p+"static/media/random_icon.b8256baa.png"},function(e,t,n){e.exports=n.p+"static/media/vote_icon.48622bff.png"},function(e,t,n){e.exports=n.p+"static/media/rating_icon.b073f595.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=p(n(3)),r=p(n(0)),s=p(n(1)),l=p(n(4)),u=p(n(5)),o=n(2),i=p(o),c=p(n(116)),d=p(n(117)),f=p(n(18));function p(e){return e&&e.__esModule?e:{default:e}}n(202);var h={trendingPolls:{title:"Trending"},endingSoonest:{title:"Ending Soon"},latestPolls:{title:"Latest"},starPolls:{title:"Featured Polls",url:"/starPolls"},myVotes:{title:"My Votes",url:"/myVotes"},localPolls:{title:"Local"},nationalPolls:{title:"National"},socialPolls:{title:"Friends Voted On...",url:"/social"},politicalPolls:{title:"Political & Human Rights",url:"/browse/Pol"},humanRightsPolls:{title:"News & Current Events",url:"/browse/Hum"},lifestylePolls:{title:"Lifestyle & Health",url:"/browse/Lif"},sportsPolls:{title:"Sports, Hobbies & Games",url:"/browse/Spo"},technologyPolls:{title:"Business & Finance",url:"/browse/Tec"},environmentPolls:{title:"Science & Nature",url:"/browse/Env"},justForFunPolls:{title:"Technology & Gadgets",url:"/browse/Jus"},entertainmentPolls:{title:"Arts & Entertainment",url:"/browse/Ent"},otherPolls:{title:"Everything Else",url:"/browse/Oth"},randomPolls:{title:"Random"}},m=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.props=e,n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"getPollsFor",value:function(e,t){var n=this.countPolls(e);if(n>t){var a=Math.floor(Math.random()*(n-t+1));return this.props.polls[e].slice(a,a+t)}return this.props.polls[e]}},{key:"countPolls",value:function(e){return this.props.polls[e]?this.props.polls[e].length:0}},{key:"getRowFor",value:function(e){if(this.countPolls(e)>0){var t=h[e];return i.default.createElement("div",null,i.default.createElement(c.default,{title:t.title,image:f.default[t.title],url:t.url}),i.default.createElement(d.default,{polls:this.getPollsFor(e,5)}))}}},{key:"starPolls",value:function(){if(this.countPolls("starPolls")>0)return i.default.createElement("div",null,i.default.createElement(c.default,{title:"Featured Polls",image:f.default["Featured Polls"],url:"/starPolls"}),i.default.createElement(d.default,{polls:this.getPollsFor("starPolls",3),forceNormal:!1}))}},{key:"render",value:function(){return this.props.polls?i.default.createElement("div",{className:"pollSummary"},this.getRowFor("trendingPolls"),this.getRowFor("endingSoonest"),this.getRowFor("latestPolls"),this.starPolls(),this.getRowFor("myVotes"),this.getRowFor("localPolls"),this.getRowFor("nationalPolls"),this.getRowFor("socialPolls"),this.getRowFor("politicalPolls"),this.getRowFor("humanRightsPolls"),this.getRowFor("lifestylePolls"),this.getRowFor("sportsPolls"),this.getRowFor("technologyPolls"),this.getRowFor("environmentPolls"),this.getRowFor("justForFunPolls"),this.getRowFor("entertainmentPolls"),this.getRowFor("otherPolls"),this.getRowFor("randomPolls")):i.default.createElement("div",{className:"pollSummary"})}}]),t}(o.Component);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(n(3)),r=d(n(0)),s=d(n(1)),l=d(n(4)),u=d(n(5)),o=n(2),i=d(o),c=n(6);function d(e){return e&&e.__esModule?e:{default:e}}n(196);var f=function(e){function t(){return(0,r.default)(this,t),(0,l.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"onClick",value:function(){this.props.url&&this.props.history.push(this.props.url)}},{key:"render",value:function(){var e=this;return i.default.createElement("div",{className:"summaryHeader",onClick:function(){return e.onClick()}},i.default.createElement("img",{src:this.props.image}),i.default.createElement("span",null,this.props.title))}}]),t}(o.Component);t.default=(0,c.withRouter)(f)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(n(3)),r=d(n(0)),s=d(n(1)),l=d(n(4)),u=d(n(5)),o=n(2),i=d(o),c=d(n(32));function d(e){return e&&e.__esModule?e:{default:e}}n(200);var f=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.props=e,n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this,t=this.props.polls.map(function(t){return i.default.createElement(c.default,{key:t.id,poll:t,forceNormal:e.props.forceNormal})});return i.default.createElement("div",{className:"pollRow"},t)}}]),t}(o.Component);f.defaultProps={forceNormal:!0},t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=w(n(7)),r=w(n(8)),s=w(n(3)),l=w(n(0)),u=w(n(1)),o=w(n(4)),i=w(n(5)),c=n(2),d=w(c),f=(n(6),w(n(9))),p=w(n(11)),h=w(n(10)),m=w(n(119)),v=w(n(120)),g=w(n(121)),y=w(n(122));function w(e){return e&&e.__esModule?e:{default:e}}n(216);var k=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.store=e.store,n.pollId=n.props.match.params.pollId,n.state={authenticated:n.store.getAuthenticated(),loading:!1,showOnFeed:!0,showVote:!0},n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.pollId=e.match.params.pollId,this.store.setPoll(this.pollId,null),this.setState({loading:!0}),this.webFetch()}},{key:"componentDidMount",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toggleSocial",value:function(){this.setState({showOnFeed:!this.state.showOnFeed})}},{key:"toggleVote",value:function(){this.setState({showVote:!this.state.showVote})}},{key:"webFetch",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.store.hydrateCheck()&&this.store.getAuthenticated()){e.next=2;break}return e.abrupt("return");case 2:return this.setState({loading:!0}),e.next=5,f.default.fetchPoll(this.pollId);case 5:t=e.sent,this.store.setPoll(this.pollId,t),this.setState({loading:!1});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"performVote",value:function(){var e=(0,r.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,f.default.voteOnPoll(this.pollId,t,this.state.showOnFeed);case 3:(n=e.sent).success?((r=this.store.getPoll(this.pollId)).results=n.results,r.hasVoted=!0,r.votedOn=[{answerText:t}],this.store.setPoll(this.pollId,r)):alert("Error"),this.setState({loading:!1});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"shouldShowResults",value:function(e){return e.hasVoted||e.hasExpired||!this.store.getAuthenticated()}},{key:"containerContent",value:function(e){var t=this;return this.shouldShowResults(e)?d.default.createElement(v.default,{poll:e,showVote:this.state.showVote}):d.default.createElement(m.default,{answers:e.answers,onVote:function(e){return t.performVote(e)}})}},{key:"numberToCommaFormat",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"summaryContent",value:function(e){return this.state.authenticated?d.default.createElement("div",{className:"summaryContainer"},d.default.createElement(g.default,{category:e.category,type:e.type}),d.default.createElement(y.default,{category:e.category,type:e.type})):d.default.createElement("div",{className:"pollInstallBanner"},d.default.createElement("div",{className:"installBannerText"},"Not registered? Install ClearPoll app to get started!"),d.default.createElement("div",{className:"installBannerImages"},d.default.createElement("a",{href:"https://play.google.com/store/apps/details?id=com.nextechdevelopments.clearpoll",target:"_blank"},d.default.createElement("img",{src:n(39)})),d.default.createElement("a",{href:"https://itunes.apple.com/us/app/clearpoll/id1347664374",target:"_blank"},d.default.createElement("img",{src:n(40)}))))}},{key:"pollElement",value:function(){var e=this,t=this.store.getPoll(this.pollId);if(!t)return null;var a=new p.default(t);return d.default.createElement("div",null,d.default.createElement("div",{className:"pollQuestion"},a.question),d.default.createElement("div",{className:"mainRow"},d.default.createElement("div",{className:"detailsContainer"},d.default.createElement("div",{className:"field"},d.default.createElement("img",{src:n(33)}),a.pollId),d.default.createElement("div",{className:"field"},d.default.createElement("img",{src:n(15)}),this.numberToCommaFormat(a.pollVotes)),!a.hasExpired&&d.default.createElement("div",{className:"field"},d.default.createElement("img",{src:n(28)}),a.timeRemaining),!this.shouldShowResults(a)&&d.default.createElement("div",{className:"field socialField"},d.default.createElement("div",{className:"socialFeedText"},"Show friends you voted?"),d.default.createElement("div",{className:"socialFeedContainer"},d.default.createElement("img",{src:n(123)}),this.state.showOnFeed?d.default.createElement("span",{className:"socialButton enabled",onClick:function(){return e.toggleSocial()}},"Yes"):d.default.createElement("span",{className:"socialButton disabled",onClick:function(){return e.toggleSocial()}},"No")))),d.default.createElement("div",{className:"contentContainer"},this.containerContent(a))),this.store.getAuthenticated()&&this.shouldShowResults(a)&&d.default.createElement("div",{className:"voteControlContainer"},d.default.createElement("div",{className:"voteControl",onClick:function(){return e.toggleVote()}},this.state.showVote?"Hide Vote":"Show Vote")),this.socialContent,this.summaryContent(a))}},{key:"render",value:function(){return d.default.createElement("div",{className:"viewPoll"},d.default.createElement(h.default,{enabled:this.state.loading}),!this.state.loading&&this.pollElement())}},{key:"currentUrlEscaped",get:function(){return"https://web.clearpoll.com"+this.props.location.pathname}},{key:"twitterShareUrl",get:function(){return"https://twitter.com/share?url="+this.currentUrlEscaped}},{key:"facebookShareUrl",get:function(){return"https://www.facebook.com/sharer/sharer.php?u="+this.currentUrlEscaped}},{key:"googleShareUrl",get:function(){return"https://plus.google.com/share?url="+this.currentUrlEscaped}},{key:"redditShareUrl",get:function(){return"http://www.reddit.com/submit?url="+this.currentUrlEscaped}},{key:"socialContent",get:function(){return this.state.authenticated?d.default.createElement("div",{className:"socialContainer"},d.default.createElement("div",{className:"socialBanner"},"Share this poll!"),d.default.createElement("div",{className:"socialButtons"},d.default.createElement("a",{target:"_blank",href:this.twitterShareUrl},d.default.createElement("img",{src:n(124)})),d.default.createElement("a",{target:"_blank",href:this.facebookShareUrl},d.default.createElement("img",{src:n(125)})),d.default.createElement("a",{target:"_blank",href:this.googleShareUrl},d.default.createElement("img",{src:n(126)})),d.default.createElement("a",{target:"_blank",href:this.redditShareUrl},d.default.createElement("img",{src:n(127)})))):d.default.createElement("div",{className:"socialContainer"},d.default.createElement("div",{className:"socialBanner"},d.default.createElement("a",{className:"voteButton",href:"/login"},"Vote")))}}]),t}(c.Component);t.default=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(n(3)),r=d(n(0)),s=d(n(1)),l=d(n(4)),u=d(n(5)),o=n(2),i=d(o),c=d(n(29));function d(e){return e&&e.__esModule?e:{default:e}}n(206);var f=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.props=e,n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"onVote",value:function(e){this.props.onVote(e)}},{key:"render",value:function(){var e=this,t=this.props.answers.map(function(t,n){return i.default.createElement("div",{className:"answer",key:n,style:{backgroundColor:c.default[n]},onClick:function(){return e.onVote(t)}},t)});return i.default.createElement("div",{style:{display:"flex"}},i.default.createElement("div",{className:"answersContainer"},t),i.default.createElement("div",{className:"answersSpacer"}))}}]),t}(o.Component);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(13)),r=f(n(3)),s=f(n(0)),l=f(n(1)),u=f(n(4)),o=f(n(5)),i=n(2),c=f(i),d=f(n(29));function f(e){return e&&e.__esModule?e:{default:e}}n(208);var p=function(e){function t(e){(0,s.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.props=e,n}return(0,o.default)(t,e),(0,l.default)(t,[{key:"graphElement",value:function(e,t){var a=Math.floor(100*e.voteCount/(this.props.poll.pollVotes||1)),r=this.props.poll.votedOn&&this.props.poll.votedOn[0];return c.default.createElement("div",{className:"resultContainer",key:t},c.default.createElement("div",{className:"resultAnswer"},this.props.showVote&&r&&e.answerText==r.answerText&&c.default.createElement("img",{src:n(15)}),c.default.createElement("span",{className:"resultAnswerText"},e.answerText)),c.default.createElement("div",{className:"graph"},c.default.createElement("div",{className:"voteCount"},e.voteCount),c.default.createElement("div",{className:"votePercentage"},e.votePercentage,"%"),c.default.createElement("div",{className:"voteBarContainer"},c.default.createElement("div",{className:"voteBarInner",style:{width:a+"%",backgroundColor:d.default[t]}}))))}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"graphContainer"},this.resultsWithPercentages.map(function(t,n){return e.graphElement(t,n)}))}},{key:"totalVotes",get:function(){return this.props.poll.results.reduce(function(e,t){return e+t.voteCount},0)}},{key:"resultsWithPercentages",get:function(){for(var e=this,t=this.props.poll.results.map(function(t){var n=0==e.totalVotes?0:Math.floor(100*t.voteCount/e.totalVotes);return(0,a.default)(t,{votePercentage:n})}),n=function(){var n=-1,a=0;if(t.forEach(function(t,r){var s=100*t.voteCount/e.totalVotes-t.votePercentage;s>0&&s>a&&(n=r,a=s)}),n<0)return"break";t[n].votePercentage++};100-t.reduce(function(e,t){return e+t.votePercentage},0)>0;){if("break"===n())break}return t}}]),t}(i.Component);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=p(n(3)),s=p(n(0)),l=p(n(1)),u=p(n(4)),o=p(n(5)),i=p(n(30)),c=n(2),d=p(c),f=p(n(18));function p(e){return e&&e.__esModule?e:{default:e}}n(210);var h=(a={Pol:{title:"Political & Human Rights"},Env:{title:"Science & Nature"},Lif:{title:"Lifestyle & Health"},Hum:{title:"News & Current Events"},Oth:{title:"Everything Else"},All:{title:"All Categories"},Jus:{title:"Technology & Gadgets"},Spo:{title:"Sports, Hobbies & Games"},Ent:{title:"Arts & Entertainment"},Tec:{title:"Business & Finance"}},(0,i.default)(a,"All",{title:"All Categories"}),(0,i.default)(a,"Star",{title:"Featured Polls"}),(0,i.default)(a,"MyVotes",{title:"My Votes"}),(0,i.default)(a,"MyPolls",{title:"My Polls"}),(0,i.default)(a,"Social",{title:"Social"}),a),m=function(e){function t(e){(0,s.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.props=e,n}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=h[this.props.category];return"Star"==this.props.type?d.default.createElement("div",{className:"pollSummaryHeader"},d.default.createElement("img",{src:f.default["Featured Polls"]}),d.default.createElement("span",null,"Featured Polls")):d.default.createElement("div",{className:"pollSummaryHeader"},d.default.createElement("img",{src:f.default[e.title]}),d.default.createElement("span",null,e.title))}}]),t}(c.Component);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=v(n(7)),r=v(n(8)),s=v(n(3)),l=v(n(0)),u=v(n(1)),o=v(n(4)),i=v(n(5)),c=n(2),d=v(c),f=v(n(10)),p=v(n(9)),h=v(n(32)),m=v(n(17));function v(e){return e&&e.__esModule?e:{default:e}}n(214);var g=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.state={loading:!0,polls:[],loadingMore:!0,canLoadMore:!0},n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){0}},{key:"webFetch",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({loadingMore:!0}),t=this.state.polls.length,n=void 0,"Star"!=this.props.type){e.next=9;break}return e.next=6,p.default.getPolls({active:"true",type:"Star",category:"All",sortOrder:"mostVotes",recordStartNo:t,recordQty:20});case 6:n=e.sent,e.next=12;break;case 9:return e.next=11,p.default.getPolls({active:"true",type:"Normal",category:this.props.category,sortOrder:"mostVotes",recordStartNo:t,recordQty:20});case 11:n=e.sent;case 12:this.setState({loading:!1,loadingMore:!1,canLoadMore:n.polls&&20==n.polls.length,polls:this.state.polls.concat(n.polls||[])});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"pollListContainer"},d.default.createElement(f.default,{enabled:this.state.loading,fullScreen:!1}),d.default.createElement("div",{className:"polls"},this.pollElements),!this.state.loading&&d.default.createElement(m.default,{moreAvailable:this.state.canLoadMore,loading:this.state.loadingMore,onClick:function(){return e.webFetch()}}))}},{key:"pollElements",get:function(){return this.state.polls.map(function(e,t){return d.default.createElement(h.default,{poll:e})})}}]),t}(c.Component);t.default=g},function(e,t,n){e.exports=n.p+"static/media/social_share_icon.487c40e9.png"},function(e,t,n){e.exports=n.p+"static/media/twitter_icon.ea04b00c.png"},function(e,t,n){e.exports=n.p+"static/media/facebook_icon.53934be6.png"},function(e,t,n){e.exports=n.p+"static/media/google_icon.27b33027.png"},function(e,t,n){e.exports=n.p+"static/media/reddit_icon.14da617d.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=g(n(7)),r=g(n(8)),s=g(n(3)),l=g(n(0)),u=g(n(1)),o=g(n(4)),i=g(n(5)),c=n(2),d=g(c),f=(n(6),g(n(9))),p=(g(n(11)),g(n(10))),h=g(n(19)),m=g(n(12)),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(34));function g(e){return e&&e.__esModule?e:{default:e}}n(220);var y=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));n.store=e.store;var a=v.parse(e.location.search);return n.searchTerm=a.q,n.state={loading:!1},n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=v.parse(e.location.search);this.searchTerm=t.q,this.webFetch()}},{key:"componentDidMount",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"webFetch",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.store.hydrateCheck()){e.next=2;break}return e.abrupt("return");case 2:return this.setState({loading:!0}),e.next=5,f.default.doSearch(this.searchTerm);case 5:t=e.sent,this.store.setSearchResult(this.searchTerm,t.polls),this.setState({loading:!1});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return d.default.createElement("div",{className:"search"},d.default.createElement(p.default,{enabled:this.state.loading}),d.default.createElement(m.default,{searchText:this.searchTerm}),d.default.createElement(h.default,{polls:this.store.getSearchResult(this.searchTerm),forceNormal:!0,showSortOrder:!1}))}}]),t}(c.Component);t.default=y},function(e,t,n){e.exports=n.p+"static/media/sort_icon.92823863.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=b(n(13)),r=b(n(7)),s=b(n(8)),l=b(n(3)),u=b(n(0)),o=b(n(1)),i=b(n(4)),c=b(n(5)),d=n(2),f=b(d),p=(n(6),b(n(9))),h=(b(n(11)),b(n(10))),m=b(n(19)),v=b(n(12)),g=b(n(131)),y=b(n(132)),w=b(n(23)),k=b(n(20)),E=b(n(17));function b(e){return e&&e.__esModule?e:{default:e}}n(228);var x=function(e){function t(e){(0,u.default)(this,t);var n=(0,i.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return n.store=e.store,n.category=n.props.match.params.category,n.url=n.props.match.url,console.dir(n.props.match),n.state={loading:!1,locationFilter:"Global",sortOrder:"mostVotes",loadingMore:!1,canLoadMore:!0},n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.props=e,this.category=e.match.params.category?e.match.params.category:null,this.url=e.match.url,this.webFetch(!0)}},{key:"componentDidMount",value:function(){var e=(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"webFetch",value:function(){var e=(0,s.default)(r.default.mark(function e(){var t,n,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.store.hydrateCheck()&&this.isCategorySelected){e.next=2;break}return e.abrupt("return");case 2:return s&&this.store.setCategoryPolls(this.category,[]),this.setState({loading:s,loadingMore:!0}),t=this.store.getCategoryPolls(this.category),e.next=7,p.default.getPolls((0,a.default)(this.filterParams,{category:this.category,sortOrder:this.state.sortOrder,recordStartNo:t.length,recordQty:20,positionLatitude:"",positionLongitude:"",locationFilter:this.state.locationFilter}));case 7:n=e.sent,this.store.setCategoryPolls(this.category,t.concat(n.polls)),this.setState({loading:!1,loadingMore:!1,canLoadMore:n.polls&&20==n.polls.length});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"changeLocationFilter",value:function(e){this.state.locationFilter!=e&&(this.state.locationFilter=e,this.webFetch(!0))}},{key:"changeSortOrder",value:function(e){this.state.sortOrder!=e&&(this.state.sortOrder=e,this.webFetch(!0))}},{key:"render",value:function(){return f.default.createElement("div",{className:"completedPolls"},f.default.createElement(h.default,{enabled:this.state.loading}),f.default.createElement(v.default,null),this.content,this.showMoreElement)}},{key:"isCategorySelected",get:function(){return"string"==typeof this.category}},{key:"pageType",get:function(){return this.url.startsWith("/completed")?"completed":this.url.startsWith("/browse")?"browse":void 0}},{key:"filterParams",get:function(){switch(this.pageType){case"completed":return{active:"false",type:"Completed"};case"browse":return{active:"true",type:"Normal"}}}},{key:"content",get:function(){var e=this;return this.isCategorySelected?f.default.createElement("div",{style:{margin:0,padding:0}},f.default.createElement("div",{className:"headerLocation"},f.default.createElement(y.default,{defaultLocation:this.state.locationFilter,onChange:function(t){return e.changeLocationFilter(t)}})),f.default.createElement("div",{className:"headerNameFilter"},f.default.createElement(w.default,{category:this.category}),f.default.createElement(k.default,{sortOrder:this.state.sortOrder,onChange:function(t){return e.changeSortOrder(t)}})),f.default.createElement(m.default,{polls:this.store.getCategoryPolls(this.category),showSortOrder:!1})):f.default.createElement(g.default,{basePath:this.pageType})}},{key:"showMoreElement",get:function(){var e=this;if(this.isCategorySelected&&!this.state.loading)return f.default.createElement(E.default,{moreAvailable:this.state.canLoadMore,loading:this.state.loadingMore,onClick:function(){return e.webFetch(!1)}})}}]),t}(d.Component);t.default=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(3)),r=f(n(0)),s=f(n(1)),l=f(n(4)),u=f(n(5)),o=n(2),i=f(o),c=n(6),d=f(n(18));function f(e){return e&&e.__esModule?e:{default:e}}n(222);var p=[{name:"Political & Human Rights",shortName:"Pol",color:"#7776be"},{name:"News & Current Events",shortName:"Hum",color:"#8a9dbe"},{name:"Lifestyle & Health",shortName:"Lif",color:"#f0718c"},{name:"Arts & Entertainment",shortName:"Ent",color:"#ef7245"},{name:"Sports, Hobbies & Games",shortName:"Spo",color:"#cdc034"},{name:"Business & Finance",shortName:"Tec",color:"#0581aa"},{name:"Science & Nature",shortName:"Env",color:"#7eca6f"},{name:"Technology & Gadgets",shortName:"Jus",color:"#c85297"},{name:"Everything Else",shortName:"Oth",color:"#5693d1"},{name:"All Categories",shortName:"All",color:"#01bec0"}],h=function(e){function t(){return(0,r.default)(this,t),(0,l.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"openCategory",value:function(e){this.props.history.push("/"+this.props.basePath+"/"+e)}},{key:"render",value:function(){return i.default.createElement("div",{className:"categoryList"},this.categoryElements)}},{key:"categoryElements",get:function(){var e=this;return console.dir(p),p.map(function(t,n){return i.default.createElement("div",{className:"category",key:n,style:{backgroundColor:t.color},onClick:function(){return e.openCategory(t.shortName)}},i.default.createElement("span",{className:"categoryImage"},i.default.createElement("img",{src:d.default[t.shortName+"_browse"]})),i.default.createElement("span",null,t.name))})}}]),t}(o.Component);t.default=(0,c.withRouter)(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(3)),r=c(n(0)),s=c(n(1)),l=c(n(4)),u=c(n(5)),o=n(2),i=c(o);function c(e){return e&&e.__esModule?e:{default:e}}n(224);var d=["Global","National","Local"],f=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.state={selected:d.indexOf(n.props.defaultLocation)},n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"changeSelected",value:function(e){this.setState({selected:e}),this.props.onChange(d[e])}},{key:"render",value:function(){return i.default.createElement("div",{className:"locationListWrapper"},this.optionElements)}},{key:"optionElements",get:function(){var e=this;return d.map(function(t,n){var a=n==e.state.selected?"selected":"unselected";return i.default.createElement("div",{key:n,className:a,onClick:function(){return e.changeSelected(n)}},t)})}}]),t}(o.Component);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=w(n(7)),r=w(n(8)),s=w(n(3)),l=w(n(0)),u=w(n(1)),o=w(n(4)),i=w(n(5)),c=n(2),d=w(c),f=(n(6),w(n(9))),p=(w(n(11)),w(n(10))),h=w(n(19)),m=w(n(12)),v=w(n(23)),g=w(n(20)),y=w(n(17));function w(e){return e&&e.__esModule?e:{default:e}}n(228);var k=36,E=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.store=e.store,n.state={loading:!0,sortOrder:"newest",loadingMore:!1,canLoadMore:n.store.getStarPolls()==k},n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"webFetch",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t,n,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.store.hydrateCheck()){e.next=3;break}return this.setState({loading:!1}),e.abrupt("return");case 3:return this.setState({loadingMore:!0}),t=r?[]:this.store.getStarPolls(),e.next=7,f.default.getPolls({category:"All",type:"Star",active:"true",sortOrder:this.state.sortOrder,recordStartNo:t.length,recordQty:k,positionLatitude:"",positionLongitude:"",locationFilter:""});case 7:n=e.sent,this.store.setStarPolls(t.concat(n.polls)),this.setState({loading:!1,loadingMore:!1,canLoadMore:n.polls&&n.polls.length==k});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"changeSortOrder",value:function(e){this.state.sortOrder!=e&&(this.state.sortOrder=e,this.webFetch(!0))}},{key:"render",value:function(){return d.default.createElement("div",{className:"completedPolls"},d.default.createElement(p.default,{enabled:this.state.loading}),d.default.createElement(m.default,null),this.content,this.showMoreElement)}},{key:"content",get:function(){var e=this;return d.default.createElement("div",null,d.default.createElement("div",{className:"headerNameFilter"},d.default.createElement(v.default,{category:"Star"}),d.default.createElement(g.default,{sortOrder:this.state.sortOrder,onChange:function(t){return e.changeSortOrder(t)}})),d.default.createElement(h.default,{polls:this.store.getStarPolls(),showSortOrder:!1}))}},{key:"showMoreElement",get:function(){var e=this;return d.default.createElement(y.default,{moreAvailable:this.state.canLoadMore,loading:this.state.loadingMore,onClick:function(){return e.webFetch(!1)}})}}]),t}(c.Component);t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=w(n(7)),r=w(n(8)),s=w(n(3)),l=w(n(0)),u=w(n(1)),o=w(n(4)),i=w(n(5)),c=n(2),d=w(c),f=(n(6),w(n(9))),p=(w(n(11)),w(n(10))),h=w(n(19)),m=w(n(12)),v=w(n(23)),g=w(n(20)),y=w(n(17));function w(e){return e&&e.__esModule?e:{default:e}}n(228);var k=20,E=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.store=e.store,n.state={loading:!0,sortOrder:"mostVotes",loadingMore:!1,canLoadMore:n.store.getMyVotes()==k},n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"webFetch",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t,n,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.store.hydrateCheck()){e.next=3;break}return this.setState({loading:!1}),e.abrupt("return");case 3:return this.setState({loadingMore:!0}),t=r?[]:this.store.getMyVotes(),e.next=7,f.default.getPolls({category:"All",type:"MyVotes",active:"true",sortOrder:this.state.sortOrder,recordStartNo:t.length,recordQty:k,positionLatitude:"",positionLongitude:"",locationFilter:""});case 7:n=e.sent,this.store.setMyVotes(t.concat(n.polls)),this.setState({loading:!1,loadingMore:!1,canLoadMore:n.polls&&n.polls.length==k});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"changeSortOrder",value:function(e){this.state.sortOrder!=e&&(this.state.sortOrder=e,this.webFetch(!0))}},{key:"render",value:function(){return d.default.createElement("div",{className:"completedPolls"},d.default.createElement(p.default,{enabled:this.state.loading}),d.default.createElement(m.default,null),this.content,this.showMoreElement)}},{key:"content",get:function(){var e=this;return d.default.createElement("div",null,d.default.createElement("div",{className:"headerNameFilter"},d.default.createElement(v.default,{category:"MyVotes"}),d.default.createElement(g.default,{sortOrder:this.state.sortOrder,onChange:function(t){return e.changeSortOrder(t)}})),d.default.createElement(h.default,{polls:this.store.getMyVotes(),showSortOrder:!1,forceNormal:!0}))}},{key:"showMoreElement",get:function(){var e=this;return d.default.createElement(y.default,{moreAvailable:this.state.canLoadMore,loading:this.state.loadingMore,onClick:function(){return e.webFetch(!1)}})}}]),t}(c.Component);t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=w(n(7)),r=w(n(8)),s=w(n(3)),l=w(n(0)),u=w(n(1)),o=w(n(4)),i=w(n(5)),c=n(2),d=w(c),f=(n(6),w(n(9))),p=(w(n(11)),w(n(10))),h=w(n(19)),m=w(n(12)),v=w(n(23)),g=w(n(20)),y=w(n(17));function w(e){return e&&e.__esModule?e:{default:e}}n(228);var k=20,E=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.store=e.store,n.state={loading:!0,sortOrder:"newest",loadingMore:!1,canLoadMore:n.store.getMyVotes()==k},n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"webFetch",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t,n,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.store.hydrateCheck()){e.next=3;break}return this.setState({loading:!1}),e.abrupt("return");case 3:return this.setState({loadingMore:!0}),t=r?[]:this.store.getMyVotes(),e.next=7,f.default.getPolls({category:"All",type:"MyPolls",active:"true",sortOrder:this.state.sortOrder,recordStartNo:t.length,recordQty:k,positionLatitude:"",positionLongitude:"",locationFilter:""});case 7:n=e.sent,this.store.setMyVotes(t.concat(n.polls)),this.setState({loading:!1,loadingMore:!1,canLoadMore:n.polls&&n.polls.length==k});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"changeSortOrder",value:function(e){this.state.sortOrder!=e&&(this.state.sortOrder=e,this.webFetch(!0))}},{key:"render",value:function(){return d.default.createElement("div",{className:"completedPolls"},d.default.createElement(p.default,{enabled:this.state.loading}),d.default.createElement(m.default,null),this.content,this.showMoreElement)}},{key:"content",get:function(){var e=this;return d.default.createElement("div",null,d.default.createElement("div",{className:"headerNameFilter"},d.default.createElement(v.default,{category:"MyPolls"}),d.default.createElement(g.default,{sortOrder:this.state.sortOrder,onChange:function(t){return e.changeSortOrder(t)}})),d.default.createElement(h.default,{polls:this.store.getMyVotes(),showSortOrder:!1,forceNormal:!0}))}},{key:"showMoreElement",get:function(){var e=this;return d.default.createElement(y.default,{moreAvailable:this.state.canLoadMore,loading:this.state.loadingMore,onClick:function(){return e.webFetch(!1)}})}}]),t}(c.Component);t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=m(n(3)),r=m(n(0)),s=m(n(1)),l=m(n(4)),u=m(n(5)),o=n(2),i=m(o),c=(n(6),m(n(9)),m(n(11)),m(n(10))),d=(m(n(19)),m(n(12))),f=(m(n(23)),m(n(20)),m(n(17)),m(n(137))),p=m(n(139)),h=m(n(18));function m(e){return e&&e.__esModule?e:{default:e}}n(242);var v=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.store=e.store,n.pollList=i.default.createRef(),n.state={loading:!1},n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this;return i.default.createElement("div",{className:"socialFeed"},i.default.createElement(c.default,{enabled:this.state.loading}),i.default.createElement(d.default,null),i.default.createElement("div",{className:"socialPageHeader"},i.default.createElement("img",{src:h.default.Social}),"Social"),i.default.createElement("div",{className:"socialContent"},i.default.createElement(f.default,{ref:this.pollList,store:this.store}),i.default.createElement(p.default,{onRefresh:function(t){return e.pollList.current.refresh(t)}})))}}]),t}(o.Component);t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=v(n(7)),r=v(n(8)),s=v(n(3)),l=v(n(0)),u=v(n(1)),o=v(n(4)),i=v(n(5)),c=n(2),d=v(c),f=v(n(9)),p=(v(n(11)),v(n(10))),h=v(n(138)),m=v(n(17));function v(e){return e&&e.__esModule?e:{default:e}}n(232);var g=20,y=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.store=e.store,n.state={loading:!0,canLoadMore:n.store.getSocialFeed().length==g},n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"refresh",value:function(e){e?this.webFetch():this.setState({loading:!0})}},{key:"webFetch",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t,n,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.store.hydrateCheck()){e.next=3;break}return this.setState({loading:!1}),e.abrupt("return");case 3:return this.setState({loading:r,loadingMore:!0}),t=r?[]:this.store.getSocialFeed(),e.next=7,f.default.fetchSocialFeed({recordQty:g,recordStartNo:t.length});case 7:n=e.sent,console.dir(n),this.store.setSocialFeed(t.concat(n.polls)),this.setState({loading:!1,loadingMore:!1,canLoadMore:n.polls&&n.polls.length==g});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return d.default.createElement("div",{className:"socialPollList"},d.default.createElement(p.default,{enabled:this.state.loading,fullScreen:!1}),!this.state.loading&&this.store.getSocialFeed().map(function(e,t){return d.default.createElement(h.default,{poll:e,key:t})}),!this.state.loading&&this.showMoreElement)}},{key:"showMoreElement",get:function(){var e=this;return d.default.createElement(m.default,{moreAvailable:this.state.canLoadMore,loading:this.state.loadingMore,onClick:function(){return e.webFetch(!1)}})}}]),t}(c.Component);t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(n(3)),r=d(n(0)),s=d(n(1)),l=d(n(4)),u=d(n(5)),o=n(2),i=d(o),c=n(6);function d(e){return e&&e.__esModule?e:{default:e}}n(230);var f=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.poll=e.poll,n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"openPoll",value:function(){this.props.history.push("/poll/"+this.poll.pollId)}},{key:"button",value:function(){var e=this;return this.poll.hasVoted||this.poll.hasExpired?i.default.createElement("span",{className:"pollVoteButton resultsButton",onClick:function(){return e.openPoll()}},"Results"):i.default.createElement("span",{className:"pollVoteButton",onClick:function(){return e.openPoll()}},"Vote")}},{key:"render",value:function(){return i.default.createElement("div",{className:"socialPoll"},this.descriptionText,i.default.createElement("div",{className:"pollRight"},this.button()))}},{key:"descriptionText",get:function(){return"T"==this.poll.friendIsStar?"T"==this.poll.createdPoll?i.default.createElement("div",{className:"pollLeft"},i.default.createElement("span",{className:"textHightlightGreen"},this.poll.friendTwitterName)," created poll #",this.poll.pollId,i.default.createElement("span",{className:"textHightlightBlack"}," '",this.poll.topic,"'")):i.default.createElement("div",{className:"pollLeft"},i.default.createElement("span",{className:"textHightlightGreen"},this.poll.friendTwitterName)," voted on on poll #",this.poll.pollId,i.default.createElement("span",{className:"textHightlightBlack"}," '",this.poll.topic,"'")):"T"==this.poll.createdPoll?i.default.createElement("div",{className:"pollLeft"},i.default.createElement("span",{className:"textHightlightGreen"},this.poll.friendName)," created poll #",this.poll.pollId,i.default.createElement("span",{className:"textHightlightBlack"}," '",this.poll.topic,"'")):i.default.createElement("div",{className:"pollLeft"},i.default.createElement("span",{className:"textHightlightGreen"},this.poll.friendName)," voted on on poll #",this.poll.pollId,i.default.createElement("span",{className:"textHightlightBlack"}," '",this.poll.topic,"'"))}}]),t}(o.Component);f.defaultProps={forceNormal:!1},t.default=(0,c.withRouter)(f)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=p(n(3)),r=p(n(0)),s=p(n(1)),l=p(n(4)),u=p(n(5)),o=n(2),i=p(o),c=(p(n(9)),p(n(11)),p(n(10)),p(n(140))),d=p(n(142)),f=p(n(145));function p(e){return e&&e.__esModule?e:{default:e}}n(240);var h=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.store=e.store,n.friendList=i.default.createRef(),n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"refresh",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.friendList.current.refresh(e),this.props.onRefresh(e)}},{key:"render",value:function(){var e=this;return i.default.createElement("div",{className:"socialFriendControls"},i.default.createElement("div",{className:"socialHeader"},i.default.createElement("span",null,"Manage Friends"),i.default.createElement("img",{src:n(52)})),i.default.createElement(c.default,null),i.default.createElement(d.default,{onRefresh:function(t){return e.refresh(t)}}),i.default.createElement(f.default,{ref:this.friendList,onRefresh:function(t){return e.props.onRefresh(t)}}))}}]),t}(o.Component);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=h(n(7)),r=h(n(8)),s=h(n(3)),l=h(n(0)),u=h(n(1)),o=h(n(4)),i=h(n(5)),c=n(2),d=h(c),f=(n(6),h(n(9))),p=h(n(10));function h(e){return e&&e.__esModule?e:{default:e}}n(234);var m=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.state={searchText:"",resultsOpen:!1,loading:!1,results:[],requestsSent:[]},n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"closeResults",value:function(){this.setState({resultsOpen:!1})}},{key:"sendFriendRequest",value:function(){var e=(0,r.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:f.default.sendFriendRequest(t),this.state.requestsSent.push(t),this.forceUpdate();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"doSearch",value:function(){var e=(0,r.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.searchString.length){e.next=2;break}return e.abrupt("return");case 2:return this.setState({loading:!0,resultsOpen:!0,results:[]}),e.next=5,f.default.searchUsername(this.searchString);case 5:n=e.sent,console.dir(n),this.setState({loading:!1,results:n.users});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"socialSearch"},d.default.createElement("div",{className:"searchHeader"},d.default.createElement("img",{src:n(52)})),d.default.createElement("div",{className:"socialSeachContainer"},d.default.createElement("input",{type:"text",placeholder:"Add friend by username",value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})}}),d.default.createElement("span",{className:"socialSearchButton",onClick:function(){return e.doSearch()}},d.default.createElement("img",{className:"searchIcon",src:n(51)}))),d.default.createElement("div",{className:this.state.resultsOpen?"socialSearchResults":"socialSearchResults inactive"},d.default.createElement(p.default,{enabled:this.state.loading,fullScreen:!1}),!this.state.loading&&d.default.createElement("div",{className:"userResultsContainer"},this.results),!this.state.loading&&d.default.createElement("div",{className:"closeResults",onClick:function(){return e.closeResults()}},"Close")))}},{key:"searchString",get:function(){return this.state.searchText.trim()}},{key:"results",get:function(){var e=this;return this.state.results.map(function(t,a){return d.default.createElement("div",{className:"searchResult"},d.default.createElement("span",null,t.username),e.state.requestsSent.includes(t.id)?d.default.createElement("img",{src:n(53)}):d.default.createElement("img",{src:n(141),onClick:function(){return e.sendFriendRequest(t.id)}}))})}}]),t}(c.Component);t.default=m},function(e,t,n){e.exports=n.p+"static/media/friend_add_icon.b4614e4e.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=p(n(7)),r=p(n(8)),s=p(n(3)),l=p(n(0)),u=p(n(1)),o=p(n(4)),i=p(n(5)),c=n(2),d=p(c),f=(n(6),p(n(9)));function p(e){return e&&e.__esModule?e:{default:e}}n(236);var h=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.state={requests:[]},n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){0}},{key:"fetchRequests",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,f.default.fetchFriendRequests();case 3:t=e.sent,this.setState({loading:!1,requests:t.requests});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"rejectFriend",value:function(){var e=(0,r.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,f.default.ignoreFriendRequest(t);case 3:return this.props.onRefresh(),e.next=6,f.default.fetchFriendRequests();case 6:n=e.sent,this.setState({loading:!1,requests:n.requests});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"acceptFriend",value:function(){var e=(0,r.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,f.default.approveFriendRequest(t);case 3:return this.props.onRefresh(),e.next=6,f.default.fetchFriendRequests();case 6:n=e.sent,this.setState({loading:!1,requests:n.requests});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"friendRequest",value:function(e,t){var a=this;return d.default.createElement("div",{className:"friendRequest",key:t},d.default.createElement("div",{className:"requestName"},e.friendName),d.default.createElement("div",{className:"rejectRequest",onClick:function(){return a.rejectFriend(e.id)}},d.default.createElement("img",{src:n(143)})),d.default.createElement("div",{className:"acceptRequest",onClick:function(){return a.acceptFriend(e.id)}},d.default.createElement("img",{src:n(53)})))}},{key:"render",value:function(){return d.default.createElement("div",{className:"socialFriendRequests"},d.default.createElement("div",{className:"requestHeader"},d.default.createElement("img",{src:n(144)}),d.default.createElement("span",null,"Friend Requests")),this.content)}},{key:"friendRequests",get:function(){var e=this;return 0==this.state.requests.length?d.default.createElement("span",{className:"lolNoFriends"},"No friend requests"):this.state.requests.map(function(t){return e.friendRequest(t)})}},{key:"content",get:function(){return this.state.loading?d.default.createElement("div",{className:"friendContainer"},d.default.createElement("span",{className:"lolNoFriends"},"Loading")):d.default.createElement("div",{className:"friendContainer"},this.friendRequests)}}]),t}(c.Component);t.default=h},function(e,t,n){e.exports=n.p+"static/media/friend_reject_icon.fb70dc63.png"},function(e,t,n){e.exports=n.p+"static/media/friend_request_icon.1434f83d.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=p(n(7)),r=p(n(8)),s=p(n(3)),l=p(n(0)),u=p(n(1)),o=p(n(4)),i=p(n(5)),c=n(2),d=p(c),f=(n(6),p(n(9)));function p(e){return e&&e.__esModule?e:{default:e}}n(238);var h=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.state={loading:!0,friends:[]},n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){0}},{key:"refresh",value:function(e){this.fetchRequests()}},{key:"fetchRequests",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,f.default.fetchFriends();case 3:t=e.sent,this.setState({loading:!1,friends:t.friends});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toggleMute",value:function(){var e=(0,r.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.onRefresh(!1),n=this.state.friends.find(function(e){return e.id==t}),r=void 0,0==n.muted?(n.muted=1,r=f.default.muteFriend(t)):(n.muted=0,r=f.default.unmuteFriend(t)),this.forceUpdate(),e.next=7,r;case 7:this.props.onRefresh(!0);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeFriend",value:function(){var e=(0,r.default)(a.default.mark(function e(t){var n,r,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.friends.find(function(e){return e.id==t}),!confirm("Are you sure you want to remove "+n.username+"?")){e.next=9;break}return this.props.onRefresh(!1),r=f.default.ignoreFriendRequest(t),s=this.state.friends.filter(function(e){return e.id!=t}),this.setState({friends:s}),e.next=8,r;case 8:this.props.onRefresh(!0);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"friend",value:function(e,t){var a=this;return console.dir(e),d.default.createElement("div",{className:"friend",key:t},d.default.createElement("div",{className:"muteToggle "+(0==e.muted?"notMuted":"muted"),onClick:function(){return a.toggleMute(e.id)}},0==e.muted?d.default.createElement("img",{src:n(146)}):d.default.createElement("img",{src:n(147)})),d.default.createElement("div",{className:"friendName"},e.username),d.default.createElement("div",{className:"unfriend",onClick:function(){return a.removeFriend(e.id)}},d.default.createElement("img",{src:n(148)})))}},{key:"render",value:function(){return d.default.createElement("div",{className:"socialFriends"},d.default.createElement("div",{className:"friendsHeader"},d.default.createElement("img",{src:n(149)})),this.content)}},{key:"friends",get:function(){var e=this;return 0==this.state.friends.length?d.default.createElement("span",{className:"lolNoFriends"},"No friends"):this.state.friends.map(function(t){return e.friend(t)})}},{key:"content",get:function(){return this.state.loading?d.default.createElement("div",{className:"friendContainer"},d.default.createElement("div",{className:"friend loading"},"Loading")):d.default.createElement("div",{className:"friendContainer"},this.friends)}}]),t}(c.Component);t.default=h},function(e,t,n){e.exports=n.p+"static/media/friend_unmuted_icon.42ae4b2c.png"},function(e,t,n){e.exports=n.p+"static/media/friend_muted_icon.d4ca5040.png"},function(e,t,n){e.exports=n.p+"static/media/friend_remove_icon.067915ba.png"},function(e,t,n){e.exports=n.p+"static/media/friends_icon.66dd06f7.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(3)),r=c(n(0)),s=c(n(1)),l=c(n(4)),u=c(n(5)),o=n(2),i=c(o);n(6),c(n(9)),c(n(10));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.store=e.store,n.state={loading:!1},n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"manageFriends"})}}]),t}(o.Component);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=v(n(152)),r=v(n(7)),s=v(n(8)),l=v(n(3)),u=v(n(0)),o=v(n(1)),i=v(n(4)),c=v(n(5)),d=n(2),f=v(d),p=(n(6),v(n(9))),h=v(n(10)),m=v(n(12));function v(e){return e&&e.__esModule?e:{default:e}}n(244);var g=function(e){function t(e){(0,u.default)(this,t);var n=(0,i.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return n.store=e.store,n.state={loading:!0},n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){var e=(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"webFetch",value:function(){var e=(0,s.default)(r.default.mark(function e(){var t;!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.store.hydrateCheck()){e.next=3;break}return this.setState({loading:!1}),e.abrupt("return");case 3:return this.setState({loading:!0}),e.next=6,p.default.getUserSettings();case 6:t=e.sent,this.store.setUserSettings(t),this.setState({loading:!1});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"performDeleteAccount",value:function(){var e=(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Are you sure you want to delete your account?")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,p.default.deleteAccount();case 4:e.sent.success?window.location="/logout":alert("An error occured");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return f.default.createElement("div",{className:"accountDetails"},f.default.createElement(h.default,{enabled:this.state.loading}),f.default.createElement(m.default,null),this.settingsElement)}},{key:"settingsElement",get:function(){var e=this,t=this.store.getUserSettings();return console.dir(t),0==(0,a.default)(t).length?null:f.default.createElement("div",{className:"settingsContainer"},f.default.createElement("div",{className:"settingsHeader"},f.default.createElement("img",{src:n(153)})," Account & Settings"),f.default.createElement("div",{className:"settingsRow"},f.default.createElement("div",{className:"settingsItem"},"Username: ",f.default.createElement("span",{className:"settingsHighlight"},t.userName))),f.default.createElement("div",{className:"settingsRow"},f.default.createElement("div",{className:"settingsItem"},"Polls created: ",f.default.createElement("span",{className:"settingsHighlight"},t.pollsCreated)),f.default.createElement("div",{className:"settingsItem"},"Polls voted on: ",f.default.createElement("span",{className:"settingsHighlight"},t.pollsVotedOn))),f.default.createElement("div",{className:"settingsRow"},f.default.createElement("div",{className:"settingsItem"},"User for: ",f.default.createElement("span",{className:"settingsHighlight"},t.age)),f.default.createElement("div",{className:"settingsItem"},"Followers: ",f.default.createElement("span",{className:"settingsHighlight"},t.followers))),f.default.createElement("div",{className:"settingsRow"},f.default.createElement("div",{className:"settingsItem"},"Total points: ",f.default.createElement("span",{className:"settingsHighlight"},t.RP)),f.default.createElement("div",{className:"settingsItem"},"User ranking: ",f.default.createElement("span",{className:"settingsHighlight"},t.userRanking))),f.default.createElement("span",{className:"accountHeader"},"Account Removal"),f.default.createElement("div",{className:"accountText"},"Decided not to use ClearPoll? We're sorry to see you go! You can delete your account and remove all your profile data."),f.default.createElement("div",{className:"accountText"},"Your previous votes will anonymously count towards the poll result total for statistical purposes, with no profile attached."),f.default.createElement("div",{className:"deleteAccountButton",onClick:function(){return e.performDeleteAccount()}},"Delete Account & Profile Data"),f.default.createElement("div",{className:"accountText"},f.default.createElement("span",{className:"totesImportants"},"IMPORTANT:")," This cannot be undone!"))}}]),t}(d.Component);t.default=g},function(e,t){e.exports=require("babel-runtime/core-js/object/keys")},function(e,t,n){e.exports=n.p+"static/media/account_icon.8b0db1b0.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(3)),r=f(n(0)),s=f(n(1)),l=f(n(4)),u=f(n(5)),o=n(2),i=f(o),c=(n(6),n(155)),d=(f(n(9)),f(n(10)),f(n(12)));function f(e){return e&&e.__esModule?e:{default:e}}n(246);var p=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.store=e.store,n.state={widgetPollId:"",ratingPollId:""},n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"updateWidgetPollId",value:function(e){this.setState({widgetPollId:e.target.value.replace(/\D/g,"")})}},{key:"updateRatingPollId",value:function(e){this.setState({ratingPollId:e.target.value.replace(/\D/g,"")})}},{key:"selectCode",value:function(e){var t=e.target||e.srcElement,n=void 0,a=void 0;document.body.createTextRange?((n=document.body.createTextRange()).moveToElementText(t),n.select()):window.getSelection&&(a=window.getSelection(),(n=document.createRange()).selectNodeContents(t),a.removeAllRanges(),a.addRange(n)),e.stopPropagation(),document.execCommand("copy")}},{key:"render",value:function(){return i.default.createElement("div",null,i.default.createElement(d.default,null),i.default.createElement("div",{className:"createWidget"},this.createPollWidgetForm,this.createRatingsWidgetForm))}},{key:"widgetCode",get:function(){return'<script async charset="utf-8" src="https://web.clearpoll.com/public/widget.js"><\/script><div style="width: 380px; height: 560px;" data-clearpoll-pollId="'+this.state.widgetPollId+'"></div>'}},{key:"ratingWidgetCode",get:function(){return'<script async charset="utf-8" src="https://web.clearpoll.com/public/widget.js"><\/script><div style="width: 590px; height: 100px;" data-clearpoll-type="rating" data-clearpoll-pollId="'+this.state.ratingPollId+'"></div>'}},{key:"createPollWidgetForm",get:function(){var e=this;return i.default.createElement("div",{className:"widgetFormContainer"},i.default.createElement("div",{className:"header"},i.default.createElement("span",null,"Create a Poll Widget"),i.default.createElement("img",{src:n(15)})),i.default.createElement("div",{className:"summary"},"Clearpoll polls can be embedded on any website, allowing logged in users to vote on-site and view live results. Poll widgets are ideal for news articles or audience interaction."),i.default.createElement("div",{className:"description"},"First, create the poll inside ClearPoll App, or find an existing poll you wish to embed. Then enter the Poll ID below."),i.default.createElement("div",{className:"form"},i.default.createElement("span",null,"Enter Poll ID:"),i.default.createElement("input",{type:"text",value:this.state.widgetPollId,onChange:function(t){return e.updateWidgetPollId(t)}})),i.default.createElement("pre",{className:"code",onClick:function(t){return e.selectCode(t)}},this.widgetCode),i.default.createElement(c.CopyToClipboard,{text:this.widgetCode},i.default.createElement("div",{className:"copyButton"},"Copy")),i.default.createElement("div",{className:"footerText"},"Paste the widget code anywhere in your websites's HTML."))}},{key:"createRatingsWidgetForm",get:function(){var e=this;return i.default.createElement("div",{className:"widgetFormContainer"},i.default.createElement("div",{className:"header"},i.default.createElement("span",null,"Create a a Ratings Bar Widget"),i.default.createElement("img",{src:n(15)})),i.default.createElement("div",{className:"summary"},"Ratings bars allow your website visitors to rate anything out of 10. No Multiple votes or bot votes. Visitors can rate directly on your site, or by searching the ID in the ClearPoll app."),i.default.createElement("div",{className:"description"},"First, create the ratings bar poll inside the ClearPoll app. Then enter the Poll Id below."),i.default.createElement("div",{className:"form"},i.default.createElement("span",null,"Enter Poll ID:"),i.default.createElement("input",{type:"text",value:this.state.ratingPollId,onChange:function(t){return e.updateRatingPollId(t)}})),i.default.createElement("pre",{className:"code",onClick:function(t){return e.selectCode(t)}},this.ratingWidgetCode),i.default.createElement(c.CopyToClipboard,{text:this.ratingWidgetCode},i.default.createElement("div",{className:"copyButton"},"Copy")),i.default.createElement("div",{className:"footerText"},"Paste the widget code anywhere in your websites's HTML."))}}]),t}(o.Component);t.default=p},function(e,t){e.exports=require("react-copy-to-clipboard")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=v(n(7)),r=v(n(8)),s=v(n(3)),l=v(n(0)),u=v(n(1)),o=v(n(4)),i=v(n(5)),c=n(2),d=v(c),f=(n(6),v(n(9))),p=v(n(10)),h=v(n(12)),m=v(n(157));function v(e){return e&&e.__esModule?e:{default:e}}n(248);var g=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.store=e.store,n.state={loading:!0},n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"webFetch",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t;!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.store.hydrateCheck()){e.next=3;break}return this.setState({loading:!1}),e.abrupt("return");case 3:return this.setState({loading:!0}),e.next=6,f.default.getUserSettings();case 6:t=e.sent,this.store.setUserSettings(t),this.setState({loading:!1});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return d.default.createElement("div",{className:"rewardsPage"},d.default.createElement(p.default,{enabled:this.state.loading}),d.default.createElement(h.default,null),this.rewardsElement)}},{key:"rewardsElement",get:function(){var e=this.store.getUserSettings();return d.default.createElement("div",{className:"rewardsContent"},d.default.createElement("div",{className:"rewardsHeader"},d.default.createElement("img",{src:n(159)}),"User Rewards"),d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"rowItem"},d.default.createElement("div",{className:"itemHeader"},"Points Received"),d.default.createElement("div",{className:"itemValue"},e.RP),d.default.createElement("div",{className:"itemFooter"},d.default.createElement("div",null,"Points reset at the end of each rewards period."))),d.default.createElement("div",{className:"rowItem"},d.default.createElement("div",{className:"itemHeader"},"POLL Token Balance"),d.default.createElement("div",{className:"itemValue"},e.BP),d.default.createElement("div",{className:"itemFooter"},d.default.createElement("div",{className:"payoutButton"},"Request Payout"),d.default.createElement("div",null,"The minimum payout amount is 50 POLL."))),d.default.createElement("div",{className:"rowItem"},d.default.createElement("div",{className:"itemHeader"},"Current Multiplier Level"),d.default.createElement("div",{className:"itemValue"},"x",e.BM),d.default.createElement("div",{className:"itemFooter"},d.default.createElement("div",null,"Multiplier levels are based on your existing POLL balance in your wallet and calculated daily."),d.default.createElement("a",{className:"itemLink",href:"https://www.clearpoll.com/multiplier",target:"_blank"},"More information.")))),d.default.createElement("div",{className:"bottomContainer"},d.default.createElement("div",{className:"bottomHeader"},"Poll Wallet Address"),d.default.createElement("div",null,"Your wallet address is where your POLL tokens will be send when you request a payout. It is also the wallet we check for balance to determine your multiplier level."),d.default.createElement("a",{className:"walletButton",href:"https://clearpoll.com/beginners-guide-to-creating-a-poll-token-wallet",target:"_blank"},"Get a Wallet"),d.default.createElement(m.default,null),d.default.createElement("div",null,d.default.createElement("span",{className:"important"},"Important."),"Changing your POLL wallet address after entering it will reset your points for the current period. Your POLL balance will remain.")))}}]),t}(c.Component);t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=h(n(7)),r=h(n(8)),s=h(n(3)),l=h(n(0)),u=h(n(1)),o=h(n(4)),i=h(n(5)),c=n(2),d=h(c),f=h(n(9)),p=h(n(10));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.state={loading:!1,ethAddress:null},n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"webFetch",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,f.default.getWalletAddress();case 3:t=e.sent,this.setState({ethAddress:t.wallet}),this.setState({loading:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"saveAddress",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,f.default.saveWalletAddress(this.state.ethAddress);case 3:(t=e.sent).success||alert(t.error),this.setState({loading:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"addressField"},d.default.createElement(p.default,{enabled:this.state.loading}),d.default.createElement("span",null,"Address"),d.default.createElement("input",{type:"text",placeholder:"POLL wallet address",value:this.state.ethAddress,onChange:function(t){return e.setState({ethAddress:t.target.value})}}),d.default.createElement("span",{className:"saveButton",onClick:function(){return e.saveAddress()}},d.default.createElement("img",{src:n(158)})))}}]),t}(c.Component);t.default=m},function(e,t,n){e.exports=n.p+"static/media/save_icon.1a867146.png"},function(e,t,n){e.exports=n.p+"static/media/rewards_icon.10477903.png"},function(e,t,n){e.exports=n.p+"static/media/ClearPoll-Logo.9bf788d6.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=E(n(7)),r=E(n(8)),s=E(n(3)),l=E(n(0)),u=E(n(1)),o=E(n(4)),i=E(n(5)),c=n(2),d=E(c),f=(n(6),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(34))),p=E(n(9)),h=E(n(11)),m=E(n(10)),v=E(n(162)),g=E(n(163)),y=E(n(164)),w=E(n(166)),k=E(n(167));function E(e){return e&&e.__esModule?e:{default:e}}n(264);var b=function(e){function t(e){(0,l.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));n.store=e.store,n.pollId=n.props.match.params.pollId;var a=f.parse(e.location.search);return n.widgetType=a.type,n.state={loading:!1,showOnFeed:!0},n}return(0,i.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=(0,r.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"webFetch",value:function(){var e=(0,r.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.store.hydrateCheck()){e.next=2;break}return e.abrupt("return");case 2:return this.setState({loading:!0}),e.next=5,p.default.fetchPoll(this.pollId);case 5:t=e.sent,this.store.setPoll(this.pollId,t),this.setState({loading:!1});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"emitLoginMessage",value:function(){window.parent.postMessage({event:"openLogin",pollId:this.pollId},"*")}},{key:"performVote",value:function(){var e=(0,r.default)(a.default.mark(function e(t){var n,r,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.store.getAuthenticated()){e.next=3;break}return this.emitLoginMessage(),e.abrupt("return");case 3:if(n=this.store.getPoll(this.pollId),!(r=new h.default(n)).hasVoted&&!r.hasExpired){e.next=7;break}return e.abrupt("return");case 7:return this.setState({loading:!0}),e.next=10,p.default.voteOnPoll(this.pollId,t,this.state.showOnFeed);case 10:(s=e.sent).success?(r.results=s.results,r.pollVotes+=1,r.hasVoted=!0,r.votedOn=[{answerId:t,answerText:r.answers[t]}],this.store.setPoll(this.pollId,r)):alert("Error"),this.setState({loading:!1});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"containerContent",value:function(e){var t=this;return!this.store.getAuthenticated()||e.hasVoted||e.hasExpired?d.default.createElement(g.default,{results:e.results,totalVotes:e.pollVotes}):d.default.createElement(v.default,{answers:e.answers,onVote:function(e){return t.performVote(e)}})}},{key:"numberToCommaFormat",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"pollElement",value:function(e){return d.default.createElement("div",{className:"scrollableContainer"},d.default.createElement("div",{className:"pollQuestion"},e.question),d.default.createElement("div",{className:"contentContainer"},this.containerContent(e)))}},{key:"standardPoll",value:function(e){var t=this;return d.default.createElement("div",{className:"widgetPoll"},d.default.createElement(m.default,{enabled:this.state.loading}),e&&d.default.createElement(y.default,{poll:e,pollVotes:e.votes}),this.pollElement(e),!this.store.getAuthenticated()&&d.default.createElement(w.default,{onClick:function(){return t.emitLoginMessage()}}))}},{key:"render",value:function(){var e=this,t=this.store.getPoll(this.pollId),n=t?new h.default(t):null;return"rating"==this.widgetType?d.default.createElement(k.default,{poll:n,loading:this.state.loading,onAnswer:function(t){return e.performVote(t)}}):this.standardPoll(n)}}]),t}(c.Component);t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(n(3)),r=d(n(0)),s=d(n(1)),l=d(n(4)),u=d(n(5)),o=n(2),i=d(o),c=d(n(29));function d(e){return e&&e.__esModule?e:{default:e}}n(252);var f=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.props=e,n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"onVote",value:function(e){this.props.onVote(e)}},{key:"render",value:function(){var e=this,t=this.props.answers.map(function(t,n){return i.default.createElement("div",{className:"answer",key:n,style:{backgroundColor:c.default[n]+"!important"},onClick:function(){return e.onVote(t)}},t)});return i.default.createElement("div",{className:"answersContainer"},t)}}]),t}(o.Component);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(13)),r=f(n(3)),s=f(n(0)),l=f(n(1)),u=f(n(4)),o=f(n(5)),i=n(2),c=f(i),d=f(n(29));function f(e){return e&&e.__esModule?e:{default:e}}n(254);var p=function(e){function t(e){(0,s.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.props=e,n}return(0,o.default)(t,e),(0,l.default)(t,[{key:"graphElement",value:function(e,t){var n=.8*Math.floor(100*e.votePercentage/this.highestVotePercent);return c.default.createElement("div",{className:"resultContainer",key:t},c.default.createElement("div",{className:"resultAnswer"},e.answerText),c.default.createElement("div",{className:"graph"},c.default.createElement("div",{className:"voteCount"},e.voteCount),c.default.createElement("div",{className:"votePercentage"},e.votePercentage,"%"),c.default.createElement("div",{className:"voteBarContainer"},c.default.createElement("div",{className:"voteBarInner",style:{width:n+"%",backgroundColor:d.default[t]+" !important"}}))))}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"graphContainer"},this.resultsWithPercentages.map(function(t,n){return e.graphElement(t,n)}))}},{key:"totalVotes",get:function(){return this.props.results.reduce(function(e,t){return e+t.voteCount},0)}},{key:"highestVotePercent",get:function(){return this.resultsWithPercentages.reduce(function(e,t){return t.votePercentage>e?t.votePercentage:e},0)}},{key:"resultsWithPercentages",get:function(){for(var e=this,t=this.props.results.map(function(t){return(0,a.default)(t,{votePercentage:Math.floor(100*t.voteCount/e.totalVotes)})}),n=function(){var n=-1,a=0;if(t.forEach(function(t,r){var s=100*t.voteCount/e.totalVotes-t.votePercentage;s>0&&s>a&&(n=r,a=s)}),n<0)return"break";t[n].votePercentage++};100-t.reduce(function(e,t){return e+t.votePercentage},0)>0;){if("break"===n())break}return t}}]),t}(i.Component);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(3)),r=c(n(0)),s=c(n(1)),l=c(n(4)),u=c(n(5)),o=n(2),i=c(o);function c(e){return e&&e.__esModule?e:{default:e}}n(256);var d=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.props=e,n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"widgetHeaderContainer"},i.default.createElement("a",{className:"widgetHeader",href:"https://clearpoll.com",target:"_blank"},i.default.createElement("img",{className:"logo",src:n(165)})),i.default.createElement("div",{className:"widgetHeaderDetails"},i.default.createElement("div",null,i.default.createElement("img",{src:n(15)}),this.props.pollVotes),i.default.createElement("div",null,i.default.createElement("img",{src:n(33)}),this.props.poll.pollId),!this.props.poll.hasExpired&&i.default.createElement("div",null,i.default.createElement("img",{src:n(28)}),this.props.poll.timeRemaining)))}}]),t}(o.Component);t.default=d},function(e,t,n){e.exports=n.p+"static/media/clearpoll_logo_white.eb4d7977.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(3)),r=c(n(0)),s=c(n(1)),l=c(n(4)),u=c(n(5)),o=n(2),i=c(o);function c(e){return e&&e.__esModule?e:{default:e}}n(258);var d=function(e){function t(){return(0,r.default)(this,t),(0,l.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"widgetFooter"},i.default.createElement("div",{className:"voteButton",onClick:this.props.onClick},"Vote"))}}]),t}(o.Component);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(3)),r=f(n(0)),s=f(n(1)),l=f(n(4)),u=f(n(5)),o=n(2),i=f(o),c=(f(n(168)),f(n(10))),d=f(n(169));function f(e){return e&&e.__esModule?e:{default:e}}n(262);var p=function(e){function t(e){return(0,r.default)(this,t),(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this;return i.default.createElement("div",{className:"ratingPoll"},i.default.createElement(c.default,{enabled:this.props.loading}),i.default.createElement("div",{className:"topRow"},i.default.createElement("div",{className:"avgScore"},this.averageScoreString),i.default.createElement("div",{className:"question",style:{fontSize:this.questionFontSize+"vw"}},this.props.poll.question),i.default.createElement("div",{className:"votes"},i.default.createElement("img",{src:n(15)}),this.props.poll.votes),i.default.createElement("div",{className:"id"},i.default.createElement("img",{src:n(170)}),this.props.poll.pollId)),i.default.createElement("div",{className:"bottomRow"},i.default.createElement(d.default,{enabled:!this.props.poll.hasExpired,averageRating:this.props.poll.averageRating,onClick:function(t){return e.props.onAnswer(t)},userAnswer:this.props.poll.votedOn&&this.props.poll.votedOn[0]})))}},{key:"averageScoreString",get:function(){return parseFloat(Math.round(10*this.props.poll.averageRating)/10).toFixed(1)}},{key:"questionFontSize",get:function(){var e=5-.2*Math.max(0,this.props.poll.question.length-14);return Math.min(5,e)}}]),t}(o.Component);t.default=p},function(e,t){e.exports=require("react-cursor-position")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(3)),r=c(n(0)),s=c(n(1)),l=c(n(4)),u=c(n(5)),o=n(2),i=c(o);function c(e){return e&&e.__esModule?e:{default:e}}n(260);var d=function(e){function t(e){(0,r.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e)),s=n.props.userAnswer?Number(n.props.userAnswer.answerText):null;return n.state={lockToAnswer:s>0,mouseOver:!1,mouseStarPosition:s>0?s-1:0,animationScale:0},n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){0}},{key:"animateIn",value:function(e){this.animationStartTime||(this.animationStartTime=e);var t=(1+e-this.animationStartTime)/1e3;t<1?(this.setState({animationScale:t}),window.requestAnimationFrame(this.animateIn.bind(this))):this.setState({animationScale:1})}},{key:"onMouseMove",value:function(e){if(!this.state.lockToAnswer){var t=e.currentTarget.getBoundingClientRect(),n=100*(e.pageX-t.left)/t.width;this.setState({mouseStarPosition:Math.floor(n/10)})}}},{key:"onClick",value:function(){this.props.onClick(this.state.mouseStarPosition+1)}},{key:"toggleMousePointer",value:function(e){this.setState({mouseOver:e})}},{key:"render",value:function(){var e=this;return i.default.createElement("svg",{id:"Layer_1",viewBox:"0 0 1000 100",className:"starGraph",onMouseMove:this.onMouseMove.bind(this),onMouseOver:function(){return e.toggleMousePointer(!0)},onMouseOut:function(){return e.toggleMousePointer(!1)},onClick:this.onClick.bind(this)},i.default.createElement("rect",{x:"15",y:"0",width:this.state.animationScale*this.highlightWidth,height:"95",fill:"#06bfc1"}),i.default.createElement("linearGradient",{id:"SVGID_1_",gradientUnits:"userSpaceOnUse",y1:121.5,x2:1e3,y2:121.5,gradientTransform:"translate(0 -73)"},i.default.createElement("stop",{offset:0,id:"stop3813",stopColor:"#450069"}),i.default.createElement("stop",{offset:.326,id:"stop3815",stopColor:"#352888"}),i.default.createElement("stop",{offset:.662,id:"stop3817",stopColor:"#3e4da2"}),i.default.createElement("stop",{offset:1,id:"stop3819",stopColor:"#2586b3"})),i.default.createElement("path",{d:"M0 0v91c0 3.3 2.7 6 6 6h988c3.3 0 6-2.7 6-6V0zm101.4 40.8L80.1 60.5 85.8 89c.1.5-.1 1-.5 1.3-.2.2-.5.3-.8.3-.2 0-.4-.1-.6-.2L58.6 76.2 33.3 90.4c-.5.3-1 .2-1.4-.1-.4-.3-.6-.8-.5-1.3l5.7-28.5-21.3-19.7c-.4-.4-.5-.9-.4-1.4.2-.5.6-.8 1.1-.9l28.8-3.4L57.5 8.8c.2-.5.7-.8 1.2-.8s1 .3 1.2.8l12.2 26.3 28.8 3.4c.5.1.9.4 1.1.9-.1.5-.2 1.1-.6 1.4zm98 0l-21.3 19.7 5.7 28.5c.1.5-.1 1-.5 1.3-.2.2-.5.3-.8.3-.2 0-.4-.1-.6-.2l-25.3-14.2-25.3 14.2c-.5.3-1 .2-1.4-.1-.4-.3-.6-.8-.5-1.3l5.7-28.5-21.3-19.7c-.4-.4-.5-.9-.4-1.4.2-.5.6-.8 1.1-.9l28.8-3.4 12.2-26.3c.2-.5.7-.8 1.2-.8s1 .3 1.2.8l12.2 26.3 28.8 3.4c.5.1.9.4 1.1.9-.1.5-.2 1.1-.6 1.4zm98 0l-21.3 19.7 5.7 28.5c.1.5-.1 1-.5 1.3-.2.2-.5.3-.8.3-.2 0-.4-.1-.6-.2l-25.3-14.2-25.3 14.2c-.5.3-1 .2-1.4-.1-.4-.3-.6-.8-.5-1.3l5.7-28.5-21.3-19.7c-.4-.4-.5-.9-.4-1.4.2-.5.6-.8 1.1-.9l28.8-3.4 12.2-26.3c.2-.5.7-.8 1.2-.8s1 .3 1.2.8l12.2 26.3 28.8 3.4c.5.1.9.4 1.1.9-.1.5-.2 1.1-.6 1.4zm98 0l-21.3 19.7 5.7 28.5c.1.5-.1 1-.5 1.3-.2.2-.5.3-.8.3-.2 0-.4-.1-.6-.2l-25.3-14.2-25.3 14.2c-.5.3-1 .2-1.4-.1-.4-.3-.6-.8-.5-1.3l5.7-28.5-21.3-19.7c-.4-.4-.5-.9-.4-1.4.2-.5.6-.8 1.1-.9l28.8-3.4 12.2-26.3c.2-.5.7-.8 1.2-.8s1 .3 1.2.8l12.2 26.3 28.8 3.4c.5.1.9.4 1.1.9-.1.5-.2 1.1-.6 1.4zm98 0l-21.3 19.7 5.7 28.5c.1.5-.1 1-.5 1.3-.2.2-.5.3-.8.3-.2 0-.4-.1-.6-.2l-25.3-14.2-25.3 14.2c-.5.3-1 .2-1.4-.1-.4-.3-.6-.8-.5-1.3l5.7-28.5-21.3-19.7c-.4-.4-.5-.9-.4-1.4.2-.5.6-.8 1.1-.9l28.8-3.4 12.2-26.3c.2-.5.7-.8 1.2-.8s1 .3 1.2.8l12.2 26.3 28.8 3.4c.5.1.9.4 1.1.9-.1.5-.2 1.1-.6 1.4zm98 0l-21.3 19.7 5.7 28.5c.1.5-.1 1-.5 1.3-.2.2-.5.3-.8.3-.2 0-.4-.1-.6-.2l-25.3-14.2-25.3 14.2c-.5.3-1 .2-1.4-.1-.4-.3-.6-.8-.5-1.3l5.7-28.5-21.3-19.7c-.4-.4-.5-.9-.4-1.4.2-.5.6-.8 1.1-.9l28.8-3.4 12.2-26.3c.2-.5.7-.8 1.2-.8s1 .3 1.2.8l12.2 26.3 28.8 3.4c.5.1.9.4 1.1.9-.1.5-.2 1.1-.6 1.4zm98 0l-21.3 19.7 5.7 28.5c.1.5-.1 1-.5 1.3-.2.2-.5.3-.8.3-.2 0-.4-.1-.6-.2l-25.3-14.2-25.3 14.2c-.5.3-1 .2-1.4-.1-.4-.3-.6-.8-.5-1.3l5.7-28.5-21.3-19.7c-.4-.4-.5-.9-.4-1.4.2-.5.6-.8 1.1-.9l28.8-3.4 12.2-26.3c.2-.5.7-.8 1.2-.8s1 .3 1.2.8l12.2 26.3 28.8 3.4c.5.1.9.4 1.1.9-.1.5-.2 1.1-.6 1.4zm98 0l-21.3 19.7 5.7 28.5c.1.5-.1 1-.5 1.3-.2.2-.5.3-.8.3-.2 0-.4-.1-.6-.2l-25.3-14.2-25.3 14.2c-.5.3-1 .2-1.4-.1-.4-.3-.6-.8-.5-1.3l5.7-28.5-21.3-19.7c-.4-.4-.5-.9-.4-1.4.2-.5.6-.8 1.1-.9l28.8-3.4 12.2-26.3c.2-.5.7-.8 1.2-.8s1 .3 1.2.8l12.2 26.3 28.8 3.4c.5.1.9.4 1.1.9-.1.5-.2 1.1-.6 1.4zm98 0l-21.3 19.7 5.7 28.5c.1.5-.1 1-.5 1.3-.2.2-.5.3-.8.3-.2 0-.4-.1-.6-.2l-25.3-14.2-25.3 14.2c-.5.3-1 .2-1.4-.1-.4-.3-.6-.8-.5-1.3l5.7-28.5-21.3-19.7c-.4-.4-.5-.9-.4-1.4.2-.5.6-.8 1.1-.9l28.8-3.4 12.2-26.3c.2-.5.7-.8 1.2-.8s1 .3 1.2.8l12.2 26.3 28.8 3.4c.5.1.9.4 1.1.9-.1.5-.2 1.1-.6 1.4zm98 0l-21.3 19.7 5.7 28.5c.1.5-.1 1-.5 1.3-.2.2-.5.3-.8.3-.2 0-.4-.1-.6-.2l-25.3-14.2-25.3 14.2c-.5.3-1 .2-1.4-.1-.4-.3-.6-.8-.5-1.3l5.7-28.5-21.3-19.7c-.4-.4-.5-.9-.4-1.4.2-.5.6-.8 1.1-.9l28.8-3.4 12.2-26.3c.2-.5.7-.8 1.2-.8s1 .3 1.2.8l12.2 26.3 28.8 3.4c.5.1.9.4 1.1.9-.1.5-.2 1.1-.6 1.4z",id:"path3822",fill:"url(#SVGID_1_)"}),this.mousePointer)}},{key:"highlightWidth",get:function(){return 10*Math.floor(this.props.averageRating)+88*this.props.averageRating}},{key:"mousePointer",get:function(){if(this.props.enabled&&(this.state.mouseOver||this.state.lockToAnswer)){var e=35+98*this.state.mouseStarPosition;return i.default.createElement("polygon",{points:"48,13.7 24,0 0,13.7 ",fill:"#EF7244",transform:"translate("+e+",83)"})}}}]),t}(o.Component);t.default=d},function(e,t,n){e.exports=n.p+"static/media/poll_hash_icon2.c6f405d3.png"},function(e,t){e.exports=require("url")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetPoll=void 0;var a=v(n(21)),r=v(n(7)),s=v(n(8)),l=function(){var e=(0,s.default)(r.default.mark(function e(t,n,a,s){var l,u;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=new f.default,u=new d.default(s),l.setAuthenticated(!0),e.t0=l,e.t1=a,e.next=7,u.fetchPoll(a);case 7:e.t2=e.sent,e.t0.setPoll.call(e.t0,e.t1,e.t2),w(t,n,l,a);case 10:case"end":return e.stop()}},e,this)}));return function(t,n,a,r){return e.apply(this,arguments)}}(),u=function(){var e=(0,s.default)(r.default.mark(function e(t,n,a){var s,l;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=new f.default,l=new d.default,s.setAuthenticated(!1),e.t0=s,e.t1=a,e.next=7,l.fetchUnauthPoll(a);case 7:e.t2=e.sent,e.t0.setPoll.call(e.t0,e.t1,e.t2),w(t,n,s,a);case 10:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}(),o=v(n(2)),i=n(35),c=n(6),d=v(n(22)),f=v(n(25)),p=v(n(26)),h=v(n(54)),m=v(n(16));function v(e){return e&&e.__esModule?e:{default:e}}var g=function(){var e=(0,s.default)(r.default.mark(function e(t,n){var a,s;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.params.pollId,s=void 0;try{s=p.default.verify(t.cookies._auth)}catch(e){}if(a){e.next=6;break}return n.status(404).end(),e.abrupt("return");case 6:y(t,n),s?l(t,n,a,s):u(t,n,a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}();function y(e,t){t.writeHead(200,{"Content-Type":"text/html"}),t.write(k)}function w(e,t,n,r){var s=e.url,l=o.default.createElement(c.StaticRouter,{context:{},location:s},o.default.createElement(h.default,{store:n})),u=(0,i.renderToStaticNodeStream)(l),d=m.default.AES.encrypt((0,a.default)(n.data),"Y;8)t,[;xzy9niU2$tL?");u.pipe(t,{end:!1}),u.on("end",function(){t.end(E(d,r))})}var k='\n<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">\n    <meta name="theme-color" content="#000000">\n\n  \t<link rel="shortcut icon" href="/public/favicon.png" type="image/x-icon" />\n    <link href="/public/widgetStyle.css" rel="stylesheet" type="text/css">\n\n    <title>Clearpoll Widget</title>\n\n    <style>\n      @font-face {\n        font-family: \'Roboto-Light-CPL\';\n        src: url(\'/public/fonts/Roboto-Light.ttf\') format(\'truetype\');\n      }\n\n      html,\n      body {\n        min-height: 100%;\n        padding: 0;\n        margin: 0;\n        font-family: \'Roboto-Light-CPL\';\n      }\n\n      #root {\n        height:100%;\n        width:100%;\n        position:absolute;\n        top: 0;\n        left: 0\n        padding: 0;\n        margin: 0;\n      }\n\n    </style>\n  </head>\n  <body>\n    <div id="root">\n',E=function(e,t){return'\n      </div>\n      <script>\n        if(window.parent){\n          window.parent.postMessage({event: "loadingComplete", pollId: '+t+'}, \'*\');\n          console.log("Message sent");\n        }\n        window.storeData = "'+e+'";\n      <\/script>\n      <script type="text/javascript" src="/public/widgetBundle.js"><\/script>\n    </body>\n  </html>\n'};t.WidgetPoll=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(7)),r=o(n(8)),s=o(n(0)),l=o(n(1)),u=o(n(26));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(){function e(){(0,s.default)(this,e)}return(0,l.default)(e,null,[{key:"login",value:function(){var e=(0,r.default)(a.default.mark(function e(t,n){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.default.login(t.body.username,t.body.desktopCode);case 3:r=e.sent,n.cookie("_auth",r),n.send({success:!0}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n.clearCookie("_auth"),n.send({success:!1});case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=(0,r.default)(a.default.mark(function e(t,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.clearCookie("_auth"),n.redirect("/login");case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(7)),r=f(n(13)),s=f(n(8)),l=f(n(21)),u=f(n(0)),o=f(n(1)),i=f(n(26)),c=f(n(22)),d=f(n(16));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(t,n){(0,u.default)(this,e),this.ws=t,this.auth=n,this.apiClient=new c.default(n),t.on("message",this.handleMessage.bind(this))}return(0,o.default)(e,null,[{key:"connectionHandler",value:function(t,n){var a=void 0;try{a=i.default.verify(n.cookies._auth)}catch(e){return void t.close()}new e(t,a)}}]),(0,o.default)(e,[{key:"encryptResponse",value:function(e){return d.default.AES.encrypt((0,l.default)(e),"Y;8)t,[;xzy9niU2$tL?").toString()}},{key:"handleMessage",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l,u;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=d.default.AES.decrypt(t.toString(),"Y;8)t,[;xzy9niU2$tL?"),s=n.toString(d.default.enc.Utf8),l=JSON.parse(s),e.prev=3,e.t0=l.function,e.next="GetPollListHome"===e.t0?7:"GetPoll"===e.t0?10:"VoteOnPoll"===e.t0?13:"GetPollList"===e.t0?16:"SearchPolls"===e.t0?19:"SocialFeed"===e.t0?22:"GetUserSettings"===e.t0?25:"GetFriendRequests"===e.t0?28:"GetFriends"===e.t0?31:"MuteFriend"===e.t0?34:"UnmuteFriend"===e.t0?37:"IgnoreFriendRequest"===e.t0?40:"SearchUsername"===e.t0?43:"SendFriendRequest"===e.t0?46:"ApproveFriendRequest"===e.t0?49:"SaveWalletAddress"===e.t0?52:"GetWalletAddress"===e.t0?55:"DeleteAccount"===e.t0?58:"UserSignup"===e.t0?61:64;break;case 7:return e.next=9,this.replyHome(l);case 9:return e.abrupt("break",64);case 10:return e.next=12,this.replyGetPoll(l);case 12:return e.abrupt("break",64);case 13:return e.next=15,this.replyVoteOnPoll(l);case 15:return e.abrupt("break",64);case 16:return e.next=18,this.replyGetPollList(l);case 18:return e.abrupt("break",64);case 19:return e.next=21,this.replySearchPolls(l);case 21:return e.abrupt("break",64);case 22:return e.next=24,this.replySocialFeed(l);case 24:return e.abrupt("break",64);case 25:return e.next=27,this.replyGetUserSettings(l);case 27:return e.abrupt("break",64);case 28:return e.next=30,this.replyGetFriendRequests(l);case 30:return e.abrupt("break",64);case 31:return e.next=33,this.replyGetFriends(l);case 33:return e.abrupt("break",64);case 34:return e.next=36,this.replyMuteFriend(l);case 36:return e.abrupt("break",64);case 37:return e.next=39,this.replyUnmuteFriend(l);case 39:return e.abrupt("break",64);case 40:return e.next=42,this.replyIgnoreFriendRequest(l);case 42:return e.abrupt("break",64);case 43:return e.next=45,this.replySearchUsername(l);case 45:return e.abrupt("break",64);case 46:return e.next=48,this.replySendFriendRequest(l);case 48:return e.abrupt("break",64);case 49:return e.next=51,this.replyApproveFriendRequest(l);case 51:return e.abrupt("break",64);case 52:return e.next=54,this.replySaveWalletAddress(l);case 54:return e.abrupt("break",64);case 55:return e.next=57,this.replyGetWalletAddress(l);case 57:return e.abrupt("break",64);case 58:return e.next=60,this.replyDeleteAccount(l);case 60:return e.abrupt("break",64);case 61:return e.next=63,this.replyUserSignup(l);case 63:return e.abrupt("break",64);case 64:e.next=71;break;case 66:e.prev=66,e.t1=e.catch(3),console.dir(e.t1),u=(0,r.default)({success:!1,error:e.t1.message},{id:l.id}),this.ws.send(this.encryptResponse(u));case 71:case"end":return e.stop()}},e,this,[[3,66]])}));return function(t){return e.apply(this,arguments)}}()},{key:"replyHome",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l=t.id;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.fetchHome();case 2:n=e.sent,s=(0,r.default)(n,{id:l}),this.ws.send(this.encryptResponse(s));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replyGetPoll",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l=t.id,u=t.pollId;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.fetchPoll(u);case 2:n=e.sent,s=(0,r.default)(n,{id:l}),this.ws.send(this.encryptResponse(s));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replyVoteOnPoll",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,r,s,l=t.id,u=t.pollId,o=t.voteAnswer,i=t.showOnFeed;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.apiClient.voteOnPoll({pollId:u,voteAnswer:o,showOnFeed:i});case 3:return e.sent,e.next=6,this.apiClient.getPollResult(u);case 6:n=e.sent,r={id:l,success:!0,results:n.votesPerAnswer},this.ws.send(this.encryptResponse(r)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),s={id:l,success:!1},this.ws.send(this.encryptResponse(s));case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"replyGetPollList",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,this.apiClient.getPollList(t);case 3:s=e.sent,l=(0,r.default)({polls:s,id:n}),this.ws.send(this.encryptResponse(l));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replySearchPolls",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l=t.id,u=t.searchString;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.doSearch(u);case 2:n=e.sent,console.dir(n),s=(0,r.default)({polls:n,id:l}),this.ws.send(this.encryptResponse(s));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replySocialFeed",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l=t.id,u=t.recordQty,o=t.recordStartNo;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.getSocialFeed({recordQty:u,recordStartNo:o});case 2:n=e.sent,s=(0,r.default)({polls:n,id:l}),this.ws.send(this.encryptResponse(s));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replyGetUserSettings",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l=t.id;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.getUserSettings();case 2:n=e.sent,s=(0,r.default)(n,{id:l}),this.ws.send(this.encryptResponse(s));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replyGetFriendRequests",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,r,s=t.id;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.getFriendRequests();case 2:n=e.sent,r={id:s,requests:n},this.ws.send(this.encryptResponse(r));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replyGetFriends",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,r,s=t.id;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.getFriends();case 2:n=e.sent,r={id:s,friends:n},this.ws.send(this.encryptResponse(r));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replyMuteFriend",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l=t.id,u=t.friendId;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.muteFriend(u);case 2:n=e.sent,s=(0,r.default)(n,{id:l}),this.ws.send(this.encryptResponse(s));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replyUnmuteFriend",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l=t.id,u=t.friendId;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.unmuteFriend(u);case 2:n=e.sent,s=(0,r.default)(n,{id:l}),this.ws.send(this.encryptResponse(s));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replyIgnoreFriendRequest",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l=t.id,u=t.friendId;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.ignoreFriendRequest(u);case 2:n=e.sent,s=(0,r.default)(n,{id:l}),this.ws.send(this.encryptResponse(s));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replySearchUsername",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l=t.id,u=t.searchString;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.searchUsername(u);case 2:n=e.sent,s=(0,r.default)(n,{id:l}),this.ws.send(this.encryptResponse(s));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replySendFriendRequest",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l=t.id,u=t.friendId;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.sendFriendRequest(u);case 2:n=e.sent,s=(0,r.default)(n,{id:l}),this.ws.send(this.encryptResponse(s));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replyApproveFriendRequest",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l=t.id,u=t.friendId;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.approveFriendRequest(u);case 2:n=e.sent,s=(0,r.default)(n,{id:l}),this.ws.send(this.encryptResponse(s));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replySaveWalletAddress",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l=t.id,u=t.wallet;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.saveWalletAddress(u);case 2:n=e.sent,s=(0,r.default)(n,{id:l}),this.ws.send(this.encryptResponse(s));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replyGetWalletAddress",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l=t.id;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.getWalletAddress();case 2:n=e.sent,s=(0,r.default)(n,{id:l}),this.ws.send(this.encryptResponse(s));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replyDeleteAccount",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l=t.id;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.deleteAccount();case 2:n=e.sent,s=(0,r.default)(n,{id:l}),this.ws.send(this.encryptResponse(s));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"replyUserSignup",value:function(){var e=(0,s.default)(a.default.mark(function e(t){var n,s,l=t.phoneNumber;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.UserSignup(l);case 2:n=e.sent,s=(0,r.default)(n,{phoneNumber:l}),this.ws.send(this.encryptResponse(s));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();t.default=p.connectionHandler},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("cookie-parser")},function(e,t){},,,,,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){}]);