!function(e){var o={};function n(r){if(o[r])return o[r].exports;var t=o[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,n),t.l=!0,t.exports}n.m=e,n.c=o,n.d=function(e,o,r){n.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,o){if(1&o&&(e=n(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var t in e)n.d(r,t,function(o){return e[o]}.bind(null,t));return r},n.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(o,"a",o),o},n.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},n.p="/public/",n(n.s="./src/widget/widget.js")}({"./node_modules/babel-runtime/core-js/object/define-property.js":
/*!**********************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/define-property.js ***!
  \**********************************************************************/
/*! no static exports found */function(e,o,n){e.exports={default:n(/*! core-js/library/fn/object/define-property */"./node_modules/babel-runtime/node_modules/core-js/library/fn/object/define-property.js"),__esModule:!0}},"./node_modules/babel-runtime/helpers/classCallCheck.js":
/*!**************************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/classCallCheck.js ***!
  \**************************************************************/
/*! no static exports found */function(e,o,n){"use strict";o.__esModule=!0,o.default=function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}},"./node_modules/babel-runtime/helpers/createClass.js":
/*!***********************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/createClass.js ***!
  \***********************************************************/
/*! no static exports found */function(e,o,n){"use strict";o.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(/*! ../core-js/object/define-property */"./node_modules/babel-runtime/core-js/object/define-property.js"));o.default=function(){function e(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),(0,r.default)(e,t.key,t)}}return function(o,n,r){return n&&e(o.prototype,n),r&&e(o,r),o}}()},"./node_modules/babel-runtime/node_modules/core-js/library/fn/object/define-property.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/fn/object/define-property.js ***!
  \**********************************************************************************************/
/*! no static exports found */function(e,o,n){n(/*! ../../modules/es6.object.define-property */"./node_modules/babel-runtime/node_modules/core-js/library/modules/es6.object.define-property.js");var r=n(/*! ../../modules/_core */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_core.js").Object;e.exports=function(e,o,n){return r.defineProperty(e,o,n)}},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_a-function.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_a-function.js ***!
  \****************************************************************************************/
/*! no static exports found */function(e,o){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_an-object.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_an-object.js ***!
  \***************************************************************************************/
/*! no static exports found */function(e,o,n){var r=n(/*! ./_is-object */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_is-object.js");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_core.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_core.js ***!
  \**********************************************************************************/
/*! no static exports found */function(e,o){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_ctx.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_ctx.js ***!
  \*********************************************************************************/
/*! no static exports found */function(e,o,n){var r=n(/*! ./_a-function */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_a-function.js");e.exports=function(e,o,n){if(r(e),void 0===o)return e;switch(n){case 1:return function(n){return e.call(o,n)};case 2:return function(n,r){return e.call(o,n,r)};case 3:return function(n,r,t){return e.call(o,n,r,t)}}return function(){return e.apply(o,arguments)}}},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_descriptors.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_descriptors.js ***!
  \*****************************************************************************************/
/*! no static exports found */function(e,o,n){e.exports=!n(/*! ./_fails */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_fails.js")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_dom-create.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_dom-create.js ***!
  \****************************************************************************************/
/*! no static exports found */function(e,o,n){var r=n(/*! ./_is-object */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_is-object.js"),t=n(/*! ./_global */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_global.js").document,l=r(t)&&r(t.createElement);e.exports=function(e){return l?t.createElement(e):{}}},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_export.js":
/*!************************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_export.js ***!
  \************************************************************************************/
/*! no static exports found */function(e,o,n){var r=n(/*! ./_global */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_global.js"),t=n(/*! ./_core */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_core.js"),l=n(/*! ./_ctx */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_ctx.js"),i=n(/*! ./_hide */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_hide.js"),s=n(/*! ./_has */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_has.js"),d=function(e,o,n){var u,a,c,m=e&d.F,b=e&d.G,p=e&d.S,f=e&d.P,_=e&d.B,y=e&d.W,j=b?t:t[o]||(t[o]={}),h=j.prototype,v=b?r:p?r[o]:(r[o]||{}).prototype;for(u in b&&(n=o),n)(a=!m&&v&&void 0!==v[u])&&s(j,u)||(c=a?v[u]:n[u],j[u]=b&&"function"!=typeof v[u]?n[u]:_&&a?l(c,r):y&&v[u]==c?function(e){var o=function(o,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(o);case 2:return new e(o,n)}return new e(o,n,r)}return e.apply(this,arguments)};return o.prototype=e.prototype,o}(c):f&&"function"==typeof c?l(Function.call,c):c,f&&((j.virtual||(j.virtual={}))[u]=c,e&d.R&&h&&!h[u]&&i(h,u,c)))};d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,d.U=64,d.R=128,e.exports=d},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_fails.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_fails.js ***!
  \***********************************************************************************/
/*! no static exports found */function(e,o){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_global.js":
/*!************************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_global.js ***!
  \************************************************************************************/
/*! no static exports found */function(e,o){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_has.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_has.js ***!
  \*********************************************************************************/
/*! no static exports found */function(e,o){var n={}.hasOwnProperty;e.exports=function(e,o){return n.call(e,o)}},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_hide.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_hide.js ***!
  \**********************************************************************************/
/*! no static exports found */function(e,o,n){var r=n(/*! ./_object-dp */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_object-dp.js"),t=n(/*! ./_property-desc */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_property-desc.js");e.exports=n(/*! ./_descriptors */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_descriptors.js")?function(e,o,n){return r.f(e,o,t(1,n))}:function(e,o,n){return e[o]=n,e}},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_ie8-dom-define.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_ie8-dom-define.js ***!
  \********************************************************************************************/
/*! no static exports found */function(e,o,n){e.exports=!n(/*! ./_descriptors */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_descriptors.js")&&!n(/*! ./_fails */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_fails.js")(function(){return 7!=Object.defineProperty(n(/*! ./_dom-create */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a})},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_is-object.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_is-object.js ***!
  \***************************************************************************************/
/*! no static exports found */function(e,o){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_object-dp.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_object-dp.js ***!
  \***************************************************************************************/
/*! no static exports found */function(e,o,n){var r=n(/*! ./_an-object */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_an-object.js"),t=n(/*! ./_ie8-dom-define */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_ie8-dom-define.js"),l=n(/*! ./_to-primitive */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_to-primitive.js"),i=Object.defineProperty;o.f=n(/*! ./_descriptors */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperty:function(e,o,n){if(r(e),o=l(o,!0),r(n),t)try{return i(e,o,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[o]=n.value),e}},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_property-desc.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_property-desc.js ***!
  \*******************************************************************************************/
/*! no static exports found */function(e,o){e.exports=function(e,o){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:o}}},"./node_modules/babel-runtime/node_modules/core-js/library/modules/_to-primitive.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/_to-primitive.js ***!
  \******************************************************************************************/
/*! no static exports found */function(e,o,n){var r=n(/*! ./_is-object */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_is-object.js");e.exports=function(e,o){if(!r(e))return e;var n,t;if(o&&"function"==typeof(n=e.toString)&&!r(t=n.call(e)))return t;if("function"==typeof(n=e.valueOf)&&!r(t=n.call(e)))return t;if(!o&&"function"==typeof(n=e.toString)&&!r(t=n.call(e)))return t;throw TypeError("Can't convert object to primitive value")}},"./node_modules/babel-runtime/node_modules/core-js/library/modules/es6.object.define-property.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/babel-runtime/node_modules/core-js/library/modules/es6.object.define-property.js ***!
  \*******************************************************************************************************/
/*! no static exports found */function(e,o,n){var r=n(/*! ./_export */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_export.js");r(r.S+r.F*!n(/*! ./_descriptors */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_descriptors.js"),"Object",{defineProperty:n(/*! ./_object-dp */"./node_modules/babel-runtime/node_modules/core-js/library/modules/_object-dp.js").f})},"./src/widget/embeddedCss.js":
/*!***********************************!*\
  !*** ./src/widget/embeddedCss.js ***!
  \***********************************/
/*! no static exports found */function(e,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0});o.default="\n.clearpoll-loading-overlay {\n  width:100%;\n  height:100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n@-webkit-keyframes clearpoll-ripple-load {\n  0% {\n    top: 90px;\n    left: 90px;\n    width: 0;\n    height: 0;\n    opacity: 1;\n  }\n  100% {\n    top: 35px;\n    left: 35px;\n    width: 110px;\n    height: 110px;\n    opacity: 0;\n  }\n}\n\n.clearpoll-ripple-load {\n  position: relative;\n}\n\n.clearpoll-ripple-load div {\n  box-sizing: content-box;\n  position: absolute;\n  border-width: 10px;\n  border-style: solid;\n  opacity: 1;\n  border-radius: 50%;\n  -webkit-animation: clearpoll-ripple-load 1s cubic-bezier(0, 0.2, 0.8, 1) infinite;\n  animation: clearpoll-ripple-load 1s cubic-bezier(0, 0.2, 0.8, 1) infinite;\n}\n\n.clearpoll-ripple-load div:nth-child(1) {\n  border-color: #98fffc;\n}\n\n.clearpoll-ripple-load div:nth-child(2) {\n  border-color: #1764a1;\n  -webkit-animation-delay: -0.5s;\n  animation-delay: -0.5s;\n}\n\n.clearpoll-ripple-load {\n  width: 200px !important;\n  height: 200px !important;\n  -webkit-transform: translate(-100px, -100px) scale(1) translate(100px, 100px);\n  transform: translate(-100px, -100px) scale(1) translate(100px, 100px);\n}\n"},"./src/widget/widget.js":
/*!******************************!*\
  !*** ./src/widget/widget.js ***!
  \******************************/
/*! no static exports found */function(e,o,n){"use strict";var r=s(n(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js")),t=s(n(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js")),l=s(n(/*! ./widgetInstance */"./src/widget/widgetInstance.js")),i=s(n(/*! ./embeddedCss */"./src/widget/embeddedCss.js"));function s(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(){(0,r.default)(this,e),this.pollWidgets=[],window.__cplLoaded||(window.__cplLoaded=!0,this.addLoadingStyle(),this.findAndInitialize())}return(0,t.default)(e,[{key:"findAndInitialize",value:function(){var e=this;document.querySelectorAll("[data-clearpoll-pollId]").forEach(function(o){e.pollWidgets.push(new l.default(o))})}},{key:"addLoadingStyle",value:function(){var e=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style"),n=i.default;o.type="text/css",o.appendChild(document.createTextNode(n)),e.appendChild(o)}}]),e}();window.ClearpollWidget=new d},"./src/widget/widgetInstance.js":
/*!**************************************!*\
  !*** ./src/widget/widgetInstance.js ***!
  \**************************************/
/*! no static exports found */function(e,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=l(n(/*! babel-runtime/helpers/classCallCheck */"./node_modules/babel-runtime/helpers/classCallCheck.js")),t=l(n(/*! babel-runtime/helpers/createClass */"./node_modules/babel-runtime/helpers/createClass.js"));function l(e){return e&&e.__esModule?e:{default:e}}var i=function(){function e(o){(0,r.default)(this,e),this.pollDiv=o,this.initialize()}return(0,t.default)(e,[{key:"initialize",value:function(){this.createLoading(),this.createIframe()}},{key:"createLoading",value:function(){var e=document.createElement("div");e.classList.add("clearpoll-ripple-load"),e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),this.loadingContainer=document.createElement("div"),this.loadingContainer.classList.add("clearpoll-loading-overlay"),this.loadingContainer.appendChild(e),this.pollDiv.appendChild(this.loadingContainer)}},{key:"closeLoading",value:function(){this.loadingContainer.style.display="none",this.iframe.style.display="block"}},{key:"createIframe",value:function(){this.iframe=document.createElement("iframe"),this.iframe.src=this.widgetUrl,this.iframe.frameBorder=0,this.iframe.scrolling="no",this.iframe.style.cssText="width: 100%; height: 100%; overflow: hidden; display: none;"+("standard"!=this.pollType?"":"border-radius: 3px;"),window.addEventListener("message",this.handleIframeMessage.bind(this),!1),this.pollDiv.appendChild(this.iframe)}},{key:"refreshPoll",value:function(){this.loadingContainer.style.display="block",this.pollDiv.removeChild(this.iframe),this.createIframe()}},{key:"openLogin",value:function(){window.open("https://web.clearpoll.com/login","_blank").focus()}},{key:"closeLogin",value:function(){this.loginOverlay&&document.body.removeChild(document.getElementById("loginOverlay"))}},{key:"handleIframeMessage",value:function(e){var o=e.data;switch(o.event){case"loadingComplete":if(o.pollId!=this.pollId)return;this.closeLoading();break;case"openLogin":if(o.pollId!=this.pollId)return;this.openLogin();break;case"loggedIn":this.closeLogin(),this.refreshPoll()}}},{key:"pollId",get:function(){return this.pollDiv.attributes["data-clearpoll-pollid"].value}},{key:"pollType",get:function(){var e=this.pollDiv.attributes["data-clearpoll-type"];return e?e.value:"standard"}},{key:"widgetUrl",get:function(){return"http://127.0.0.1:3001/poll/"+this.pollId+"/widget?type="+this.pollType}},{key:"loginUrl",get:function(){return"http://127.0.0.1:3001/login?embedded=1"}}]),e}();o.default=i}});
//# sourceMappingURL=widget.js.map